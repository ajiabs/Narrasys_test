webpackJsonp([1],{"5Nri":function(e,t,n){var r,o;!function(a,i){r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(function(){function e(e,t){var n=typeof e[t];return n==E||!(n!=b||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=b||!e[t])}function n(e,t){return typeof e[t]!=w}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function o(e){return e&&N(e,T)&&$(e,x)}function a(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function i(t){typeof console!=w&&e(console,"log")}function s(e,t){O&&t?alert(e):i(e)}function l(e){L.initialized=!0,L.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,L.config.alertOnFail)}function c(e){s("Rangy warning: "+e,L.config.alertOnWarn)}function u(e){return e.message||e.description||String(e)}function d(){if(O&&!L.initialized){var t,n=!1,r=!1;e(document,"createRange")&&(t=document.createRange(),N(t,C)&&$(t,S)&&(n=!0));var s=a(document);if(!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),o(t)&&(r=!0)),!n&&!r)return void l("Neither Range nor TextRange are available");L.initialized=!0,L.features={implementsDomRange:n,implementsTextRange:r};var c,d;for(var f in D)(c=D[f])instanceof g&&c.init(c,L);for(var p=0,h=H.length;p<h;++p)try{H[p](L)}catch(t){d="Rangy init listener threw an exception. Continuing. Detail: "+u(t),i(d)}}}function f(e,t,n){n&&(e+=" in module "+n.name),L.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function p(e,t,n,r){e[t]=function(){return f(t,n,r),e[n].apply(e,k.toArray(arguments))}}function h(e){e=e||window,d();for(var t=0,n=B.length;t<n;++t)B[t](e)}function g(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n){var r=new g(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(L,t),t.supported=!0}catch(t){var r="Module '"+e+"' failed to load: "+u(t);i(r),t.stack&&i(t.stack)}}});return D[e]=r,r}function v(){}function y(){}var b="object",E="function",w="undefined",S=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],C=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],x=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],T=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],N=r(e),R=r(t),$=r(n),A=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)},D={},O=typeof window!=w&&typeof document!=w,k={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:N,areHostObjects:R,areHostProperties:$,isTextRange:o,getBody:a,forEach:A},L={version:"1.3.0",initialized:!1,isBrowser:O,supported:!0,util:k,features:{},modules:D,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==w||rangyAutoInitialize}};L.fail=l,L.warn=c;var _;!{}.hasOwnProperty?l("hasOwnProperty not supported"):(k.extend=_=function(e,t,n){var r,o;for(var a in t)t.hasOwnProperty(a)&&(r=e[a],o=t[a],n&&null!==r&&"object"==typeof r&&null!==o&&"object"==typeof o&&_(r,o,!0),e[a]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},k.createOptions=function(e,t){var n={};return _(n,t),e&&_(n,e),n}),O||l("Rangy can only run in a browser"),function(){var e;if(O){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),k.toArray=e}();var M;O&&(e(document,"addEventListener")?M=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?M=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),k.addListener=M);var H=[];k.deprecationNotice=f,k.createAliasForDeprecatedMethod=p,L.init=d,L.addInitListener=function(e){L.initialized?e(L):H.push(e)};var B=[];L.addShimListener=function(e){B.push(e)},O&&(L.shim=L.createMissingNativeApi=h,p(L,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,o=n.length;r<o;++r){if(t=n[r],!((e=D[t])&&e instanceof g))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){L.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){L.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},L.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=m(e,n,t);L.initialized&&L.supported&&r.init()},L.createCoreModule=function(e,t,n){m(e,t,n)},L.RangePrototype=v,L.rangePrototype=new v,L.selectionPrototype=new y,L.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==O||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function o(e){for(var t=0;e=e.previousSibling;)++t;return t}function a(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function i(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(H(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t){return s(e,t,!0)}function c(e,t,n){for(var r,o=n?e:e.parentNode;o;){if((r=o.parentNode)===t)return o;o=r}return null}function u(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function f(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function p(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),f(r,e),n)for(var a,i=0;a=n[i++];)a.node==e&&a.offset>t?(a.node=r,a.offset-=t):a.node==e.parentNode&&a.offset>o(e)&&++a.offset;return r}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=O)return e.ownerDocument;if(typeof e.document!=O)return e.document;if(e.parentNode)return h(e.parentNode);throw t.createError("getDocument: no document found for node")}function g(e){var n=h(e);if(typeof n.defaultView!=O)return n.defaultView;if(typeof n.parentWindow!=O)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=O)return e.contentDocument;if(typeof e.contentWindow!=O)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){if(typeof e.contentWindow!=O)return e.contentWindow;if(typeof e.contentDocument!=O)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function y(e){return e&&k.isHostMethod(e,"setTimeout")&&k.isHostObject(e,"document")}function b(e,t,n){var r;if(e?k.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):h(e):y(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function E(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,r,a){var s,l,u,d,f;if(e==r)return n===a?0:n<a?-1:1;if(s=c(r,e,!0))return n<=o(s)?-1:1;if(s=c(e,r,!0))return o(s)<a?-1:1;if(!(l=i(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if(u=e===l?l:c(e,l,!0),d=r===l?l:c(r,l,!0),u===d)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(f=l.firstChild;f;){if(f===u)return-1;if(f===d)return 1;f=f.nextSibling}}function S(e){try{return e.parentNode,!1}catch(e){return!0}}function C(e){if(!e)return"[No node]";if(B&&S(e))return"[Broken node]";if(u(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+o(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function x(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function T(e,t,n){var r=L(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(o,a):r.appendChild(o),o}function N(e){return e.parentNode.removeChild(e)}function R(e){this.root=e,this._next=e}function $(e){return new R(e)}function A(e,t){this.node=e,this.offset=t}function D(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var O="undefined",k=e.util,L=k.getBody;k.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),k.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var _=document.createElement("div");k.areHostMethods(_,["insertBefore","appendChild","cloneNode"]||!k.areHostObjects(_,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),k.isHostProperty(_,"innerHTML")||t.fail("Element is missing innerHTML property");var M=document.createTextNode("test");k.areHostMethods(M,["splitText","deleteData","insertData","appendData","cloneNode"]||!k.areHostObjects(_,["previousSibling","nextSibling","childNodes","parentNode"])||!k.areHostProperties(M,["data"]))||t.fail("Incomplete Text Node implementation");var H=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},B=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",B=S(n),e.features.crashyTextNodes=B}();var P;typeof window.getComputedStyle!=O?P=function(e,t){return g(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=O?P=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),R.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+C(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},D.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},D.prototype.toString=function(){return this.message},e.dom={arrayContains:H,isHtmlNamespace:n,parentElement:r,getNodeIndex:o,getNodeLength:a,getCommonAncestor:i,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:d,insertAfter:f,splitDataNode:p,getDocument:h,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:L,isWindow:y,getContentDocument:b,getRootContainer:E,comparePoints:w,isBrokenNode:S,inspectNode:C,getComputedStyleProperty:P,createTestElement:T,removeNode:N,fragmentFromNodeChildren:x,createIterator:$,DomPosition:A},e.DOMException=D}),L.createCoreModule("DomRange",["DomUtil"],function(e,t){function n(e,t){return 3!=e.nodeType&&(W(e,t.startContainer)||W(e,t.endContainer))}function r(e){return e.document||z(e.startContainer)}function o(e){return j(e.startContainer)}function a(e){return new B(e.parentNode,U(e))}function i(e){return new B(e.parentNode,U(e)+1)}function s(e,t,n){var r=11==e.nodeType?e.firstChild:e;return I(t)?n==t.length?M.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:Y(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function l(e,t,n){if(T(e),T(t),r(t)!=r(e))throw new P("WRONG_DOCUMENT_ERR");var o=F(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=F(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&a>=0:o<0&&a>0}function c(e){for(var t,n,o,a=r(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(c(o)),o.detach()),10==n.nodeType)throw new P("HIERARCHY_REQUEST_ERR");a.appendChild(n)}return a}function u(e,t,n){var r,o;n=n||{stop:!1};for(var a,i;a=e.next();)if(e.isPartiallySelectedSubtree()){if(t(a)===!1)return void(n.stop=!0);if(i=e.getSubtreeIterator(),u(i,t,n),i.detach(),n.stop)return}else for(r=M.createIterator(a);o=r.next();)if(t(o)===!1)return void(n.stop=!0)}function d(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),d(t),t.detach()):e.remove()}function f(e){for(var t,n,o=r(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(f(n)),n.detach()):e.remove(),10==t.nodeType)throw new P("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function p(e,t,n){var r,o=!(!t||!t.length),a=!!n;o&&(r=new RegExp("^("+t.join("|")+")$"));var i=[];return u(new g(e,!1),function(t){if((!o||r.test(t.nodeType))&&(!a||n(t))){var s=e.startContainer;if(t!=s||!I(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&I(l)&&0==e.endOffset||i.push(t)}}}),i}function h(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+M.inspectNode(e.startContainer)+":"+e.startOffset+", "+M.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&I(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||I(this.sc)?V(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||I(this.ec)?V(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,n){for(var r,o=n?t:t.parentNode;o;){if(r=o.nodeType,K(e,r))return o;o=o.parentNode}return null}}function v(e,t){if(oe(e,t))throw new P("INVALID_NODE_TYPE_ERR")}function y(e,t){if(!K(t,e.nodeType))throw new P("INVALID_NODE_TYPE_ERR")}function b(e,t){if(t<0||t>(I(e)?e.length:e.childNodes.length))throw new P("INDEX_SIZE_ERR")}function E(e,t){if(ne(e,!0)!==ne(t,!0))throw new P("WRONG_DOCUMENT_ERR")}function w(e){if(re(e,!0))throw new P("NO_MODIFICATION_ALLOWED_ERR")}function S(e,t){if(!e)throw new P(t)}function C(e,t){return t<=(I(e)?e.length:e.childNodes.length)}function x(e){return!!e.startContainer&&!!e.endContainer&&!(X&&(M.isBrokenNode(e.startContainer)||M.isBrokenNode(e.endContainer)))&&j(e.startContainer)==j(e.endContainer)&&C(e.startContainer,e.startOffset)&&C(e.endContainer,e.endOffset)}function T(e){if(!x(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function N(e,t){T(e);var n=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset,i=n===o;I(o)&&a>0&&a<o.length&&Y(o,a,t),I(n)&&r>0&&r<n.length&&(n=Y(n,r,t),i?(a-=r,o=n):o==n.parentNode&&a>=U(n)&&a++,r=0),e.setStartAndEnd(n,r,o,a)}function R(e){T(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function $(e){e.START_TO_START=ce,e.START_TO_END=ue,e.END_TO_END=de,e.END_TO_START=fe,e.NODE_BEFORE=pe,e.NODE_AFTER=he,e.NODE_BEFORE_AND_AFTER=ge,e.NODE_INSIDE=me}function A(e){$(e),$(e.prototype)}function D(e,t){return function(){T(this);var n,r,o=this.startContainer,a=this.startOffset,s=this.commonAncestorContainer,l=new g(this,!0);o!==s&&(n=V(o,s,!0),r=i(n),o=r.node,a=r.offset),u(l,w),l.reset();var c=e(l);return l.detach(),t(this,o,a,o,a),c}}function O(t,r){function o(e,t){return function(n){y(n,Z),y(j(n),Q);var r=(e?a:i)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var o=e.endContainer,a=e.endOffset;t===e.startContainer&&n===e.startOffset||(j(t)==j(o)&&1!=F(t,n,o,a)||(o=t,a=n),r(e,t,n,o,a))}function l(e,t,n){var o=e.startContainer,a=e.startOffset;t===e.endContainer&&n===e.endOffset||(j(t)==j(o)&&F(t,n,o,a)!=-1||(o=t,a=n),r(e,o,a,t,n))}var c=function(){};c.prototype=e.rangePrototype,t.prototype=new c,H.extend(t.prototype,{setStart:function(e,t){v(e,!0),b(e,t),s(this,e,t)},setEnd:function(e,t){v(e,!0),b(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],o=t,a=n;switch(e.length){case 3:a=e[2];break;case 4:o=e[2],a=e[3]}r(this,t,n,o,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){T(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){v(e,!0),r(this,e,0,e,q(e))},selectNode:function(e){v(e,!1),y(e,Z);var t=a(e),n=i(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:D(f,r),deleteContents:D(d,r),canSurroundContents:function(){T(this),w(this.startContainer),w(this.endContainer);var e=new g(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},splitBoundaries:function(){N(this)},splitBoundariesPreservingPositions:function(e){N(this,e)},normalizeBoundaries:function(){T(this);var e,t=this.startContainer,n=this.startOffset,o=this.endContainer,a=this.endOffset,i=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,a=e.length,e.appendData(t.data),G(t))},s=function(e){var r=e.previousSibling;if(r&&r.nodeType==e.nodeType){t=e;var i=e.length;if(n=r.length,e.insertData(0,r.data),G(r),t==o)a+=n,o=t;else if(o==e.parentNode){var s=U(e);a==s?(o=e,a=i):a>s&&a--}}},l=!0;if(I(o))a==o.length?i(o):0==a&&(e=o.previousSibling)&&e.nodeType==o.nodeType&&(a=e.length,t==o&&(l=!1),e.appendData(o.data),G(o),o=e);else{if(a>0){var c=o.childNodes[a-1];c&&I(c)&&i(c)}l=!this.collapsed}if(l){if(I(t))0==n?s(t):n==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(o==e&&(o=t,a+=t.length),t.appendData(e.data),G(e));else if(n<t.childNodes.length){var u=t.childNodes[n];u&&I(u)&&s(u)}}else t=o,n=a;r(this,t,n,o,a)},collapseToPoint:function(e,t){v(e,!0),b(e,t),this.setStartAndEnd(e,t)}}),A(t)}function k(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:M.getCommonAncestor(e.startContainer,e.endContainer)}function L(e,t,n,r,o){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=o,e.document=M.getDocument(t),k(e)}function _(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,k(this)}var M=e.dom,H=e.util,B=M.DomPosition,P=e.DOMException,I=M.isCharacterDataNode,U=M.getNodeIndex,W=M.isOrIsAncestorOf,z=M.getDocument,F=M.comparePoints,Y=M.splitDataNode,V=M.getClosestAncestorIn,q=M.getNodeLength,K=M.arrayContains,j=M.getRootContainer,X=e.features.crashyTextNodes,G=M.removeNode;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,I(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!I(n)||n!==this.sc&&n!==this.ec?n.parentNode&&G(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return n(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse(!1);else{e=new _(r(this.range));var t=this._current,n=t,o=0,a=t,i=q(t);W(t,this.sc)&&(n=this.sc,o=this.so),W(t,this.ec)&&(a=this.ec,i=this.eo),L(e,n,o,a,i)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],Q=[2,9,11],J=[5,6,10,12],ee=[1,3,4,5,7,8,10,11],te=[1,3,4,5,7,8],ne=m([9,11]),re=m(J),oe=m([6,10,12]),ae=document.createElement("style"),ie=!1;try{ae.innerHTML="<b>x</b>",ie=3==ae.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=ie;var se=ie?function(e){var t=this.startContainer,n=z(t);if(!t)throw new P("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:I(t)&&(r=M.parentElement(t)),r=null===r||"HTML"==r.nodeName&&M.isHtmlNamespace(z(r).documentElement)&&M.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,M.fragmentFromNodeChildren(r)}:function(e){var t=r(this),n=t.createElement("body");return n.innerHTML=e,M.fragmentFromNodeChildren(n)},le=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ce=0,ue=1,de=2,fe=3,pe=0,he=1,ge=2,me=3;H.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){T(this),E(this.startContainer,t.startContainer);var n,r,o,a,i=e==fe||e==ce?"start":"end",s=e==ue||e==ce?"start":"end";return n=this[i+"Container"],r=this[i+"Offset"],o=t[s+"Container"],a=t[s+"Offset"],F(n,r,o,a)},insertNode:function(e){if(T(this),y(e,ee),w(this.startContainer),W(e,this.startContainer))throw new P("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){T(this);var e,t;if(this.collapsed)return r(this).createDocumentFragment();if(this.startContainer===this.endContainer&&I(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=r(this).createDocumentFragment(),t.appendChild(e),t;var n=new g(this,!0);return e=c(n),n.detach(),e},canSurroundContents:function(){T(this),w(this.startContainer),w(this.endContainer);var e=new g(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},surroundContents:function(e){if(y(e,te),!this.canSurroundContents())throw new P("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){T(this);for(var e,t=new _(r(this)),n=le.length;n--;)e=le[n],t[e]=this[e];return t},toString:function(){T(this);var e=this.startContainer;if(e===this.endContainer&&I(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new g(this,!0);return u(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){T(this);var t=e.parentNode,n=U(e);if(!t)throw new P("NOT_FOUND_ERR");var r=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return r<0?o>0?ge:pe:o>0?he:me},comparePoint:function(e,t){return T(this),S(e,"HIERARCHY_REQUEST_ERR"),E(e,this.startContainer),F(e,t,this.startContainer,this.startOffset)<0?-1:F(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:se,toHtml:function(){return R(this)},intersectsNode:function(e,t){if(T(this),j(e)!=o(this))return!1;var n=e.parentNode,r=U(e);if(!n)return!0;var a=F(n,r,this.endContainer,this.endOffset),i=F(n,r+1,this.startContainer,this.startOffset);return t?a<=0&&i>=0:a<0&&i>0},isPointInRange:function(e,t){return T(this),S(e,"HIERARCHY_REQUEST_ERR"),E(e,this.startContainer),F(e,t,this.startContainer,this.startOffset)>=0&&F(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return l(this,e,!1)},intersectsOrTouchesRange:function(e){return l(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=F(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=F(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return t==-1&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return F(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset),1==F(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new P("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,q(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return T(this),p(this,e,t)},getDocument:function(){return r(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var n=r(this),o=e.createRange(n);t=t||M.getBody(n),o.selectNodeContents(t);var a=this.intersection(o),i=0,s=0;return a&&(o.setEnd(a.startContainer,a.startOffset),i=o.toString().length,s=i+a.toString().length),{start:i,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,o,a,i,s=[t],l=!1,c=!1;!c&&(r=s.pop());)if(3==r.nodeType)o=n+r.length,!l&&e.start>=n&&e.start<=o&&(this.setStart(r,e.start-n),l=!0),l&&e.end>=n&&e.end<=o&&(this.setEnd(r,e.end-n),c=!0),n=o;else for(i=r.childNodes,a=i.length;a--;)s.push(i[a])},getName:function(){return"DomRange"},equals:function(e){return _.rangesEqual(this,e)},isValid:function(){return x(this)},inspect:function(){return h(this)},detach:function(){}}),O(_,L),H.extend(_,{rangeProperties:le,RangeIterator:g,copyComparisonConstants:A,createPrototypeRange:O,inspect:h,toHtml:R,getRangeDocument:r,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=_}),L.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,o=e.dom,a=e.util,i=o.DomPosition,s=e.DomRange,l=o.getBody,c=o.getContentDocument,u=o.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function r(e){for(var t,n=f.length;n--;)t=f[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function i(e,t,n,r,o){var a=e.startContainer!==t||e.startOffset!=n,i=e.endContainer!==r||e.endOffset!=o,s=!e.equals(e.nativeRange);(a||i||s)&&(e.setEnd(r,o),e.setStart(t,n))}var u,d,f=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},s.createPrototypeRange(n,i),u=n.prototype,u.selectNode=function(e){this.nativeRange.selectNode(e),r(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},u.collapse=function(e){this.nativeRange.collapse(e),r(this)},u.cloneRange=function(){return new n(this.nativeRange.cloneRange())},u.refresh=function(){r(this)},u.toString=function(){return this.nativeRange.toString()};var p=document.createTextNode("test");l(document).appendChild(p);var h=document.createRange();h.setStart(p,0),h.setEnd(p,0);try{h.setStart(p,1),u.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},u.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},d=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(e){u.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(e){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},u.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(e){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},d=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(e){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}u.setStartBefore=d("setStartBefore","setEndBefore"),u.setStartAfter=d("setStartAfter","setEndAfter"),u.setEndBefore=d("setEndBefore","setStartBefore"),u.setEndAfter=d("setEndAfter","setStartAfter"),u.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},h.selectNodeContents(p),h.setEnd(p,3);var g=document.createRange();g.selectNodeContents(p),g.setEnd(p,4),g.setStart(p,2),h.compareBoundaryPoints(h.START_TO_END,g)==-1&&1==h.compareBoundaryPoints(h.END_TO_START,g)?u.compareBoundaryPoints=function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:u.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var v=m.firstChild,y=l(document);y.appendChild(m),h.setStart(v,1),h.setEnd(v,2),h.deleteContents(),"13"==v.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},u.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),y.removeChild(m),y=null,a.isHostMethod(h,"createContextualFragment")&&(u.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(p),u.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange){var d=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();n=e.duplicate(),n.collapse(!1);var a=n.parentElement(),i=r==a?r:o.getCommonAncestor(r,a);return i==t?i:o.getCommonAncestor(t,i)},f=function(e){return 0==e.compareEndPoints("StartToEnd",e)},p=function(e,t,n,r,a){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(o.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var c=new i(l.parentNode,o.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var d=o.getDocument(l).createElement("span");d.parentNode&&o.removeNode(d);for(var f,p,h,g,m,v=n?"StartToStart":"StartToEnd",y=a&&a.containerElement==l?a.nodeIndex:0,b=l.childNodes.length,E=b,w=E;w==b?l.appendChild(d):l.insertBefore(d,l.childNodes[w]),s.moveToElementText(d),0!=(f=s.compareEndPoints(v,e))&&y!=E;){if(f==-1){if(E==y+1)break;y=w}else E=E==y+1?y:w;w=Math.floor((y+E)/2),l.removeChild(d)}if(m=d.nextSibling,f==-1&&m&&u(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var S;if(/[\r\n]/.test(m.data)){var C=s.duplicate(),x=C.text.replace(/\r\n/g,"\r").length;for(S=C.moveStart("character",x);(f=C.compareEndPoints("StartToEnd",C))==-1;)S++,C.moveStart("character",1)}else S=s.text.length;g=new i(m,S)}else p=(r||!n)&&d.previousSibling,h=(r||n)&&d.nextSibling,g=h&&u(h)?new i(h,0):p&&u(p)?new i(p,p.data.length):new i(l,o.getNodeIndex(d));return o.removeNode(d),{boundaryPosition:g,nodeInfo:{nodeIndex:w,containerElement:l}}},h=function(e,t){var n,r,a,i,s=e.offset,c=o.getDocument(e.node),d=l(c).createTextRange(),f=u(e.node);return f?(n=e.node,r=n.parentNode):(i=e.node.childNodes,n=s<i.length?i[s]:null,r=e.node),a=c.createElement("span"),a.innerHTML="&#feff;",n?r.insertBefore(a,n):r.appendChild(a),d.moveToElementText(a),d.collapse(!t),r.removeChild(a),f&&d[t?"moveStart":"moveEnd"]("character",s),d};r=function(e){this.textRange=e,this.refresh()},r.prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=d(this.textRange);f(this.textRange)?t=e=p(this.textRange,r,!0,!0).boundaryPosition:(n=p(this.textRange,r,!0,!1),e=n.boundaryPosition,t=p(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var g=function(e){if(e.collapsed)return h(new i(e.startContainer,e.startOffset),!0);var t=h(new i(e.startContainer,e.startOffset),!0),n=h(new i(e.endContainer,e.endOffset),!1),r=l(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=g,r.prototype.toTextRange=function(){return g(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var m=function(e){return e("return this;")()}(Function);void 0===m.Range&&(m.Range=r),e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=c(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=c(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),L.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(N.isWindow(e))return e;if(e instanceof v)return e.win;var r=N.getContentDocument(e,t,n);return N.getWindow(r)}return window}function o(e){return r(e,"getWinSelection").getSelection()}function a(e){return r(e,"getDocSelection").document.selection}function i(e){var t=!1;return e.anchorNode&&(t=1==N.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",o=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function u(t){var n;return t instanceof A?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof D?n=t.nativeRange:L.implementsDomRange&&t instanceof N.getWindow(t.startContainer).Range&&(n=t),n}function d(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!N.isAncestorOf(e[0],e[t]))return!1;return!0}function f(e){var n=e.getNodes();if(!d(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function p(e){return!!e&&void 0!==e.text}function h(e,t){var n=new D(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function g(t){if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else{var n=t.docSelection.createRange();if(p(n))h(t,n);else{t.rangeCount=n.length;for(var r,o=_(n.item(0)),a=0;a<t.rangeCount;++a)r=e.createRange(o),r.selectNode(n.item(a)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,n){for(var r=e.docSelection.createRange(),o=f(n),a=_(r.item(0)),i=M(a).createControlRange(),s=0,l=r.length;s<l;++s)i.add(r.item(s));try{i.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}i.select(),g(e)}function v(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function y(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function b(e,t){for(var n,r,o=Q.length;o--;)if(n=Q[o],r=n.selection,"deleteAll"==t)y(r);else if(n.win==e)return"delete"==t?(Q.splice(o,1),!0):r;return"deleteAll"==t&&(Q.length=0),null}function E(e,n){for(var r,o=_(n[0].startContainer),a=M(o).createControlRange(),i=0,s=n.length;i<s;++i){r=f(n[i]);try{a.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),g(e)}function w(e,t){if(e.win.document!=_(t))throw new O("WRONG_DOCUMENT_ERR")}function S(t){return function(n,r){var o;this.rangeCount?(o=this.getRangeAt(0),o["set"+(t?"Start":"End")](n,r)):(o=e.createRange(this.win.document),o.setStartAndEnd(n,r)),this.setSingleRange(o,this.isBackward())}}function C(e){var t=[],n=new k(e.anchorNode,e.anchorOffset),r=new k(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,i=e.rangeCount;a<i;++a)t[a]=A.inspect(e.getRangeAt(a));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.config.checkSelectionRanges=!0;var x,T,N=e.dom,R=e.util,$=R.isHostMethod,A=e.DomRange,D=e.WrappedRange,O=e.DOMException,k=N.DomPosition,L=e.features,_=N.getDocument,M=N.getBody,H=A.rangesEqual,B=$(window,"getSelection"),P=R.isHostObject(document,"selection");L.implementsWinGetSelection=B,L.implementsDocSelection=P;var I=P&&(!B||e.config.preferTextRange);if(I)x=a,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||_(n.createRange().parentElement())==t};else{if(!B)return t.fail("Neither document.selection or window.getSelection() detected."),!1;x=o,e.isSelectionValid=function(){return!0}}e.getNativeSelection=x;var U=x();if(!U)return t.fail("Native selection was null (possibly issue 138?)"),!1;var W=e.createNativeRange(document),z=M(document),F=R.areHostProperties(U,["anchorNode","focusNode","anchorOffset","focusOffset"]);L.selectionHasAnchorAndFocus=F;var Y=$(U,"extend");L.selectionHasExtend=Y;var V="number"==typeof U.rangeCount;L.selectionHasRangeCount=V;var q=!1,K=!0,j=Y?function(t,n){var r=A.getRangeDocument(n),o=e.createRange(r);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(u(o)),t.extend(n.startContainer,n.startOffset)}:null;R.areHostMethods(U,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof U.rangeCount&&L.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,o=[],a=i(t),s=0;s<n;++s)o[s]=t.getRangeAt(s);var l=N.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("   ")),u=document.createRange();if(u.setStart(c,1),u.collapse(!0),t.removeAllRanges(),t.addRange(u),K=1==t.rangeCount,t.removeAllRanges(),!r){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)q=!1;else{var f=u.cloneRange();u.setStart(c,0),f.setEnd(c,3),f.setStart(c,2),t.addRange(u),t.addRange(f),q=2==t.rangeCount}}for(N.removeNode(l),t.removeAllRanges(),s=0;s<n;++s)0==s&&a?j?j(t,o[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[s])):t.addRange(o[s])}}(),L.selectionSupportsMultipleRanges=q,L.collapsedNonEditableSelectionsSupported=K;var X,G=!1;z&&$(z,"createControlRange")&&(X=z.createControlRange(),R.areHostProperties(X,["item","add"])&&(G=!0)),L.implementsControlRange=G,T=F?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var Z;$(U,"getRangeAt")?Z=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:F&&(Z=function(t){var n=_(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),v.prototype=e.selectionPrototype;var Q=[],J=function(e){if(e&&e instanceof v)return e.refresh(),e;e=r(e,"getNativeSelection");var t=b(e),n=x(e),o=P?a(e):null;return t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new v(n,o,e),Q.push({win:e,selection:t})),t};e.getSelection=J,R.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var ee=v.prototype;if(!I&&F&&R.areHostMethods(U,["removeAllRanges","addRange"])){ee.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var te=function(e,t){j(e.nativeSelection,t),e.refresh()};ee.addRange=V?function(t,r){if(G&&P&&"Control"==this.docSelection.type)m(this,t);else if(n(r)&&Y)te(this,t);else{var o;q?o=this.rangeCount:(this.removeAllRanges(),o=0);var a=u(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var i=Z(this.nativeSelection,this.rangeCount-1);i&&!H(i,t)&&(t=new D(i))}this._ranges[this.rangeCount-1]=t,s(this,t,oe(this.nativeSelection)),this.isCollapsed=T(this)}else this.refresh()}}:function(e,t){n(t)&&Y?te(this,e):(this.nativeSelection.addRange(u(e)),this.refresh())},ee.setRanges=function(e){if(G&&P&&e.length>1)E(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!($(U,"empty")&&$(W,"select")&&G&&I))return t.fail("No means of selecting a Range or TextRange was found"),!1;ee.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=_(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=_(t.item(0)))}e&&(M(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}c(this)},ee.addRange=function(t){"Control"==this.docSelection.type?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},ee.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?E(this,e):t&&this.addRange(e[0])}}ee.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new O("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var ne;if(I)ne=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=M(t.win.document).createTextRange(),n.collapse(!0)),"Control"==t.docSelection.type?g(t):p(n)?h(t,n):c(t)};else if($(U,"getRangeAt")&&"number"==typeof U.rangeCount)ne=function(t){if(G&&P&&"Control"==t.docSelection.type)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],oe(t.nativeSelection)),t.isCollapsed=T(t)}else c(t)};else{if(!F||"boolean"!=typeof U.isCollapsed||"boolean"!=typeof W.collapsed||!L.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ne=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=Z(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=T(e)):c(e)}}ee.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(ne(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;o--;)if(!H(t[o],this._ranges[o]))return!0;return!1}};var re=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;r<o;++r)H(t,n[r])||e.addRange(n[r]);e.rangeCount||c(e)};ee.removeRange=G&&P?function(e){if("Control"==this.docSelection.type){for(var t,n=this.docSelection.createRange(),r=f(e),o=_(n.item(0)),a=M(o).createControlRange(),i=!1,s=0,l=n.length;s<l;++s)t=n.item(s),t!==r||i?a.add(n.item(s)):i=!0;a.select(),g(this)}else re(this,e)}:function(e){re(this,e)};var oe;!I&&F&&L.implementsDomRange?(oe=i,ee.isBackward=function(){return oe(this)}):oe=ee.isBackward=function(){return!1},ee.isBackwards=ee.isBackward,ee.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},ee.collapse=function(t,n){w(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},ee.collapseToStart=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ee.collapseToEnd=function(){if(!this.rangeCount)throw new O("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ee.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},ee.deleteFromDocument=function(){if(G&&P&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),N.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,o=n.length;r<o;++r)n[r].deleteContents();this.addRange(n[o-1])}}},ee.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},ee.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ee.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ee.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},ee.setStart=S(!0),ee.setEnd=S(!1),e.rangePrototype.select=function(e){J(this.getDocument()).setSingleRange(this,e)},ee.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ee.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},ee.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ee.moveToBookmark=function(t){for(var n,r,o=[],a=0;n=t.rangeBookmarks[a++];)r=e.createRange(this.win),r.moveToBookmark(n),o.push(r);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},ee.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ee.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},ee.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(A.toHtml(t))}),e.join("")},L.implementsTextRange&&(ee.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(p(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ee.getName=function(){return"WrappedSelection"},ee.inspect=function(){return C(this)},ee.detach=function(){b(this.win,"delete"),y(this)},v.detachAll=function(){b(null,"deleteAll")},v.inspect=C,v.isDirectionBackward=n,e.Selection=v,e.selectionPrototype=ee,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return J(e)}),e=null})});var P=!1,I=function(e){P||(P=!0,!L.initialized&&L.config.autoInitialize&&d())};return O&&("complete"==document.readyState?I():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",I,!1),M(window,"load",I))),L})},DuR2:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},EKta:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-r(e)}function a(e){var t,n,o,a,i,s,l=e.length;i=r(e),s=new d(3*l/4-i),o=i>0?l-4:l;var c=0;for(t=0,n=0;t<o;t+=4,n+=3)a=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[c++]=a>>16&255,s[c++]=a>>8&255,s[c++]=255&a;return 2===i?(a=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[c++]=255&a):1===i&&(a=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[c++]=a>>8&255,s[c++]=255&a),s}function i(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(r));return o.join("")}function l(e){for(var t,n=e.length,r=n%3,o="",a=[],i=0,l=n-r;i<l;i+=16383)a.push(s(e,i,i+16383>l?l:i+16383));return 1===r?(t=e[n-1],o+=c[t>>2],o+=c[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=c[t>>10],o+=c[t>>4&63],o+=c[t<<2&63],o+="="),a.push(o),a.join("")}t.byteLength=o,t.toByteArray=a,t.fromByteArray=l;for(var c=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=f.length;p<h;++p)c[p]=f[p],u[f.charCodeAt(p)]=p;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},EuP9:function(e,t,n){"use strict";(function(e){function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?u(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return s(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(s(t),e=o(e,t<0?0:0|h(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|h(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),a.alloc(+e)}function m(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return $(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,o);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,o){function a(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,l/=2,n/=2}var c;if(o){var u=-1;for(c=n;c<s;c++)if(a(e,c)===a(t,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===l)return u*i}else u!==-1&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var d=!0,f=0;f<l;f++)if(a(e,c+f)!==a(t,f)){d=!1;break}if(d)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function S(e,t,n,r){return j(Y(t,e.length-n),e,n,r)}function C(e,t,n,r){return j(V(t),e,n,r)}function x(e,t,n,r){return C(e,t,n,r)}function T(e,t,n,r){return j(K(t),e,n,r)}function N(e,t,n,r){return j(q(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function $(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a=e[o],i=null,s=a>239?4:a>223?3:a>191?2:1;if(o+s<=n){var l,c,u,d;switch(s){case 1:a<128&&(i=a);break;case 2:128==(192&(l=e[o+1]))&&(d=(31&a)<<6|63&l)>127&&(i=d);break;case 3:l=e[o+1],c=e[o+2],128==(192&l)&&128==(192&c)&&(d=(15&a)<<12|(63&l)<<6|63&c)>2047&&(d<55296||d>57343)&&(i=d);break;case 4:l=e[o+1],c=e[o+2],u=e[o+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(d=(15&a)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&d<1114112&&(i=d)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return A(r)}function A(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=F(e[a]);return o}function L(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function _(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function H(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function P(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,o){return o||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function W(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,o=n%256,a.push(o),a.push(r);return a}function K(e){return G.toByteArray(W(e))}function j(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function X(e){return e!==e}var G=n("EKta"),Z=n("ujcs"),Q=n("sOR5");t.Buffer=a,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return i(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return l(null,e,t,n)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},a.byteLength=m,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?$(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,o){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,s=n-t,l=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){i=c[d],s=u[d];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var o=t-e;r=new a(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUInt8=function(e,t){return t||_(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||_(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||_(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||_(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||_(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||_(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||_(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||_(e,4,this.length),Z.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||_(e,4,this.length),Z.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||_(e,8,this.length),Z.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||_(e,8,this.length),Z.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var a=n-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=a.isBuffer(e)?e:Y(new a(e,r).toString()),l=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n("DuR2"))},F8Uk:function(e,t,n){var r,o;!function(a,i){r=[n("5Nri"),n("VUCL")],void 0!==(o=function(e,t){return a["textAngular.name"]=i(e)}.apply(t,r))&&(e.exports=o)}(this,function(e){function t(e){try{return 0!==angular.element(e).length}catch(e){return!1}}function n(e,n){if(!e||""===e||o.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(n.display&&(""===n.display||!t(n.display))||!n.display&&!n.buttontext&&!n.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';o[e]=n}function r(e){var t=document.createElement("DIV");t.innerHTML=e;var n=t.textContent||t.innerText||"";return n.replace("​",""),n=n.trim()}var o={};angular.module("textAngularSetup",[]).constant("taRegisterTool",n).value("taTools",o).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(e){},htmlEditorSetup:function(e){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)&&(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(e,t){return{imgOnSelectAction:function(e,t,n){var r=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px");var o=n.displayElements.popoverContainer;o.empty();var a=angular.element('<div class="btn-group" style="padding-right: 6px;">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');i.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),r()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),r()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),r()});var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');c.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),r()}),a.append(i),a.append(s),a.append(l),a.append(c),o.append(a),a=angular.element('<div class="btn-group" style="padding-right: 6px;">');var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');u.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),r()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');d.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),r()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');f.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),r()}),a.append(u),a.append(f),a.append(d),o.append(a),a=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(e){e.preventDefault(),t.remove(),r()}),a.append(p),o.append(a),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(n,r,o){n.preventDefault(),o.displayElements.popover.css("width","436px");var a=o.displayElements.popoverContainer;a.empty(),a.css("line-height","28px");var i=angular.element('<a href="'+r.attr("href")+'" target="_blank">'+r.attr("href")+"</a>");i.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),a.append(i);var s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');l.on("click",function(n){n.preventDefault();var a=e.prompt(t.insertLink.dialogPrompt,r.attr("href"));a&&""!==a&&"http://"!==a&&(r.attr("href",a),o.updateTaBindtaTextElement()),o.hidePopover()}),s.append(l);var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');c.on("click",function(e){e.preventDefault(),r.replaceWith(r.contents()),o.updateTaBindtaTextElement(),o.hidePopover()}),s.append(c);var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"</button>");"_blank"===r.attr("target")&&u.addClass("active"),u.on("click",function(e){e.preventDefault(),r.attr("target","_blank"===r.attr("target")?"":"_blank"),u.toggleClass("active"),o.updateTaBindtaTextElement()}),s.append(u),a.append(s),o.showPopover(r)},extractYoutubeVideoId:function(e){var t=e.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return t&&t[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions","$log",function(e,t,n,r,o,a,i,s){var l={};if(a("",l),i.forceTextAngularSanitize===!0&&"taSanitize"!==l.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");e("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var c=function(e){return function(){return this.$editor().queryFormatBlockState(e)}},u=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){e(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:n.heading.tooltip+t.charAt(1),action:u,activeState:c(t.toLowerCase())})}),e("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),e("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),e("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),e("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),e("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),e("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),e("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),e("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),e("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyLeft")}}),e("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="right"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyRight")}}),e("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:n.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;if(e)try{t="justify"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyFull")}}),e("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;if(e)try{t="center"===e.css("text-align")}catch(e){t=!1}return t=t||this.$editor().queryCommandState("justifyCenter")}}),e("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),e("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),e("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),e("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),e("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),e("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(e,t){var n;this.$editor().wrapSelection("removeFormat",null);var o=angular.element(r.getSelectionElement());n=r.getAllSelectedElements();var a=function(e,t){e=angular.element(e);var n=t;return t||(n=e),angular.forEach(e.children(),function(e){if("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase())n=a(e,n);else{var t=angular.element("<p></p>");t.html(angular.element(e).html()),n.after(t),n=t}}),e.remove(),n};angular.forEach(n,function(e){"ul"!==e.nodeName.toLowerCase()&&"ol"!==e.nodeName.toLowerCase()||a(e)}),angular.forEach(o.find("ul"),a),angular.forEach(o.find("ol"),a);var i=this.$editor(),s=function(e){e=angular.element(e),e[0]!==i.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),s)};angular.forEach(o,s),o[0]&&"li"!==o[0].tagName.toLowerCase()&&"ol"!==o[0].tagName.toLowerCase()&&"ul"!==o[0].tagName.toLowerCase()&&"true"!==o[0].getAttribute("contenteditable")&&this.$editor().wrapSelection("formatBlock","default"),t()}});var d=function(e){return e.toLowerCase().indexOf("javascript")!==-1};e("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var e;if((e=t.prompt(n.insertImage.dialogPrompt,"http://"))&&""!==e&&"http://"!==e&&!d(e)){r.getSelectionElement().tagName&&"a"===r.getSelectionElement().tagName.toLowerCase()&&r.setSelectionAfterElement(r.getSelectionElement());var o='<img src="'+e+'">';return this.$editor().wrapSelection("insertHTML",o,!0)}},onElementSelect:{element:"img",action:o.imgOnSelectAction}}),e("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var e;if(e=t.prompt(n.insertVideo.dialogPrompt,"https://"),!d(e)&&e&&""!==e&&"https://"!==e&&(videoId=o.extractYoutubeVideoId(e),videoId)){var a="https://www.youtube.com/embed/"+videoId,i='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+a+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return r.getSelectionElement().tagName&&"a"===r.getSelectionElement().tagName.toLowerCase()&&r.setSelectionAfterElement(r.getSelectionElement()),this.$editor().wrapSelection("insertHTML",i,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:o.imgOnSelectAction}}),e("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;if((e=r.getSelectionElement().tagName&&"a"===r.getSelectionElement().tagName.toLowerCase()?t.prompt(n.insertLink.dialogPrompt,r.getSelectionElement().href):t.prompt(n.insertLink.dialogPrompt,"http://"))&&""!==e&&"http://"!==e&&!d(e))return this.$editor().wrapSelection("createLink",e,!0)},activeState:function(e){return!!e&&"A"===e[0].tagName},onElementSelect:{element:"a",action:o.aOnSelectAction}}),e("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerHTML||"",n=0;return""!==t.replace(/\s*<[^>]*?>\s*/g,"")&&""!==t.trim()&&(n=t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}}),e("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerText||e[0].textContent,n=t.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=n,this.$editor().charcount=n,!1}})}]);var a={ie:function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent),isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},i=i||{};i.now=function(){return i.now||i.mozNow||i.msNow||i.oNow||i.webkitNow||function(){return(new Date).getTime()}}();var s=/^(address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,l=/^(#text|span|address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var c,u,d,f,p,h;if(a.ie>8||void 0===a.ie){for(var g=document.styleSheets,m=0;m<g.length;m++)if((0===g[m].media.length||g[m].media.mediaText.match(/(all|screen)/gi))&&g[m].href&&g[m].href.match(/textangular\.(min\.|)css/gi)){c=g[m];break}c||(c=function(){var e=document.createElement("style");return a.webkit&&e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet}()),u=function(e,t){return f(c,e,t)},f=function(e,t,n){var r,o;return e.cssRules?r=Math.max(e.cssRules.length-1,0):e.rules&&(r=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r),c.rules?o=c.rules[r]:c.cssRules&&(o=c.cssRules[r]),o},h=function(e,t){var n,r;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){r=n;break}return r},d=function(e){p(c,e)},p=function(e,t){var n=e.cssRules||e.rules;if(n&&0!==n.length){var r=h(t,n);e.removeRule?e.removeRule(r):e.deleteRule(r)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(e){return e?""===e?void 0===a.ie?"div":a.ie<=8?"P":"p":a.ie<=8?e.toUpperCase():e:a.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(e,t){return function(n){var r=angular.element("<div></div>");return r[0].innerHTML=n,angular.forEach(e,function(e){var n=[];e.selector&&""!==e.selector?n=r.find(e.selector):e.customAttribute&&""!==e.customAttribute&&(n=t.getByAttribute(r,e.customAttribute)),angular.forEach(n,function(t){t=angular.element(t),e.selector&&""!==e.selector&&e.customAttribute&&""!==e.customAttribute?void 0!==t.attr(e.customAttribute)&&e.renderLogic(t):e.renderLogic(t)})}),r[0].innerHTML}}]).factory("taFixChrome",function(){return function(e,t){if(!e||!angular.isString(e)||e.length<=0)return e;for(var n,r,o,a=/style\s?=\s?(["'])(?:(?=(\\?))\2.)*?\1/gi,i=/<span class="Apple-converted-space">([^<]+)<\/span>/gi,s="",l=0;n=i.exec(e);)o=n[1],o=o.replace(/&nbsp;/gi," "),s+=e.substring(l,n.index)+o,l=n.index+n[0].length;if(l&&(s+=e.substring(l),e=s,s="",l=0),!t){for(;n=a.exec(e);)s+=e.substring(l,n.index-1),r=n[0],n=/font-family: inherit;|line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;|color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi.exec(r),n?(r=r.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;|( |)color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|( |)background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi,""),r.length>8&&(s+=" "+r)):s+=" "+r,l=a.lastIndex;s+=e.substring(l)}return l>0?s.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e}}).factory("taSanitize",["$sanitize",function(e){function t(e,t){for(var n,r=0,o=0,a=/<[^>]*>/gi;n=a.exec(e);)if(o=n.index,"/"===n[0].substr(1,1)){if(0===r)break;r--}else r++;return t+e.substring(0,o)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(o)}function n(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var r,a,i,s,l,u,d=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",p="",h=0;a=d.exec(e);){s=a[3]||a[4];var g=new RegExp(c,"i");if(angular.isString(s)&&g.test(s)){l="";for(var m=new RegExp(c,"ig");i=m.exec(s);)for(r=0;r<o.length;r++)i[2*r+2]&&(l+="<"+o[r].tag+">");u=n(e.substring(h,a.index)),f.length>0?p+=t(u,f):p+=u,s=s.replace(new RegExp(c,"ig"),""),p+="<"+a[1].trim(),s.length>0&&(p+=' style="'+s+'"'),p+=a[5]+">",h=a.index+a[0].length,f=l}}return f.length>0?p+=t(e.substring(h),f):p+=e.substring(h),p}function r(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",o=0;t=n.exec(e);){r+=e.substring(o,t.index),o=t.index+t[0].length;var a="<"+t[1]+t[5];/style=("([^"]+)"|'([^']+)')/gi.test(a)?a=a.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):a+=' style="text-align:'+(t[3]||t[4])+';"',a+=">",r+=a}return r+e.substring(o)}for(var o=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],a=[],i=0;i<o.length;i++){for(var s="("+o[i].property+":\\s*(",l=0;l<o[i].values.length;l++)l>0&&(s+="|"),s+=o[i].values[l];s+=");)",a.push(s)}var c="("+a.join("|")+")",u=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi),d=new RegExp(/<span class="rangySelectionBoundary" id="selectionBoundary_\d+_\d+">[^<>]+?<\/span>/gi),f=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi);return function(t,o,a){if(!a)try{t=n(t)}catch(e){}if(t=r(t))try{t=t.replace(u,""),t=t.replace(d,""),t=t.replace(u,""),t=t.replace(f,"")}catch(e){}var i;try{i=e(t),a&&(i=t)}catch(e){i=o||""}var s,l=i.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),c=i.replace(/(&#(9|10);)*/gi,""),p=/<pre[^>]*>.*?<\/pre[^>]*>/gi,h=0,g=0;for(i="";null!==(s=p.exec(c))&&h<l.length;)i+=c.substring(g,s.index)+l[h],g=s.index+s[0].length,h++;return i+c.substring(g)}}]).factory("taToolExecuteAction",["$q","$log",function(e,t){return function(n){void 0!==n&&(this.$editor=function(){return n});var r,o=e.defer(),a=o.promise,i=this.$editor();try{r=this.action(o,i.startAction()),a.finally(function(){i.endAction.call(i)})}catch(e){t.error(e)}(r||void 0===r)&&o.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(t,n,r){var o=function(e,n){var r,o,a=e.find("li");for(o=a.length-1;o>=0;o--)r=angular.element("<"+n+">"+a[o].innerHTML+"</"+n+">"),e.after(r);e.remove(),t.setSelectionToElementEnd(r[0])},a=function(e,r,o,a,i){var s,l,c,u,d,f=e.find("li");for(l=0;l<f.length;l++)if(f[l].outerHTML===r[0].outerHTML){d=l,l>0&&(c=f[l-1]),l+1<f.length&&(u=f[l+1]);break}var p="";if(a?p+="<"+i+">"+r[0].innerHTML+"</"+i+">":(p+="<"+n(o)+">",p+="<li>"+r[0].innerHTML+"</li>",p+="</"+n(o)+">"),s=angular.element(p),!c)return r.remove(),e.after(angular.element(e[0].outerHTML)),e.after(s),e.remove(),void t.setSelectionToElementEnd(s[0]);if(u){var h=(e.parent(),""),g=e[0].nodeName.toLowerCase();for(h+="<"+g+">",l=0;l<d;l++)h+="<li>"+f[l].innerHTML+"</li>";h+="</"+g+">";var m="";for(m+="<"+g+">",l=d+1;l<f.length;l++)m+="<li>"+f[l].innerHTML+"</li>";m+="</"+g+">",e.after(angular.element(m)),e.after(s),e.after(angular.element(h)),e.remove(),t.setSelectionToElementEnd(s[0])}else r.remove(),e.after(s),t.setSelectionToElementEnd(s[0])},i=function(e,r,o,a,i){var s,l,c,u,d,f=e.find("li"),p=[];for(l=0;l<f.length;l++)for(c=0;c<r.length;c++)f[l].isEqualNode(r[c])&&(p[c]=l);p[0]>0&&(u=f[p[0]-1]),p[r.length-1]+1<f.length&&(d=f[p[r.length-1]+1]);var h="";if(a)for(c=0;c<r.length;c++)h+="<"+i+">"+r[c].innerHTML+"</"+i+">",r[c].remove();else{for(h+="<"+n(o)+">",c=0;c<r.length;c++)h+=r[c].outerHTML,r[c].remove();h+="</"+n(o)+">"}if(s=angular.element(h),!u)return e.after(angular.element(e[0].outerHTML)),e.after(s),e.remove(),void t.setSelectionToElementEnd(s[0]);if(!d)return e.after(s),void t.setSelectionToElementEnd(s[0]);var g="",m=e[0].nodeName.toLowerCase();for(g+="<"+m+">",l=0;l<p[0];l++)g+="<li>"+f[l].innerHTML+"</li>";g+="</"+m+">";var v="";for(v+="<"+m+">",l=p[r.length-1]+1;l<f.length;l++)v+="<li>"+f[l].innerHTML+"</li>";v+="</"+m+">",e.after(angular.element(v)),e.after(s),e.after(angular.element(g)),e.remove(),t.setSelectionToElementEnd(s[0])},l=function(e){/(<br(|\/)>)$/i.test(e.innerHTML.trim())?t.setSelectionBeforeElement(angular.element(e).find("br")[0]):t.setSelectionToElementEnd(e)},c=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),l(n.find("li")[0])},u=function(e,t,r){for(var o="",a=0;a<e.length;a++)o+="<"+n("li")+">"+e[a].innerHTML+"</"+n("li")+">";var i=angular.element("<"+r+">"+o+"</"+r+">");t.after(i),t.remove(),l(i.find("li")[0])},d=function(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];r.tagName&&r.tagName.match(s)&&d(r,t)}if(null===e.parentNode)return e;if("<br>"===t)return e;var o=angular.element(t);return o[0].innerHTML=e.innerHTML,e.parentNode.insertBefore(o[0],e),e.parentNode.removeChild(e),o};return function(l,f){return l=n(l),function(p,h,g,m){var v,y,b,E,w,S,C,x,T=angular.element("<"+l+">");try{t.getSelection&&(x=t.getSelection()),C=t.getSelectionElement();var N,R;void 0!==C.tagName&&("div"===C.tagName.toLowerCase()&&/taTextElement.+/.test(C.id)&&x&&x.start&&1===x.start.offset&&1===x.end.offset?(N=C.innerHTML,/<br>/i.test(N)&&(N=N.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(N)&&(N=N.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(N)&&(N=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(N)&&(N=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(N)&&(N=N.replace(/<span><\/span>/i,"")),R="<div>"+N+"</div>",C.innerHTML=R,t.setSelectionToElementEnd(C.childNodes[0]),C=t.getSelectionElement()):"span"===C.tagName.toLowerCase()&&x&&x.start&&1===x.start.offset&&1===x.end.offset?(N=C.innerHTML,/<br>/i.test(N)&&(N=N.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(N)&&(N=N.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(N)&&(N=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(N)&&(N=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(N)&&(N=N.replace(/<span><\/span>/i,"")),R="<div>"+N+"</div>",C.innerHTML=R,t.setSelectionToElementEnd(C.childNodes[0]),C=t.getSelectionElement()):"p"===C.tagName.toLowerCase()&&x&&x.start&&1===x.start.offset&&1===x.end.offset?(N=C.innerHTML,/<br>/i.test(N)&&(N=N.replace(/<br>/i,"&#8203;"),C.innerHTML=N)):"li"===C.tagName.toLowerCase()&&x&&x.start&&x.start.offset===x.end.offset&&(N=C.innerHTML,/<br>/i.test(N)&&(N=N.replace(/<br>/i,""),C.innerHTML=N)))}catch(e){}if(C){var $=angular.element(C),A=C&&C.tagName&&C.tagName.toLowerCase()||"";if("insertorderedlist"===p.toLowerCase()||"insertunorderedlist"===p.toLowerCase()){var D=n("insertorderedlist"===p.toLowerCase()?"ol":"ul"),O=t.getOnlySelectedElements();if(O.length>1&&("ol"===A||"ul"===A))return i($,O,D,D===A,l);if(A===D)return $[0].childNodes.length!==O.length&&1===O.length?($=angular.element(O[0]),a($.parent(),$,D,!0,l)):o($,l);if("li"===A&&$.parent()[0].tagName.toLowerCase()===D&&1===$.parent().children().length)return o($.parent(),l);if("li"===A&&$.parent()[0].tagName.toLowerCase()!==D&&1===$.parent().children().length)return c($.parent(),D);if(A.match(s)&&!$.hasClass("ta-bind")){if(O.length&&$[0].childNodes.length!==O.length&&1===O.length)return $=angular.element(O[0]),a($.parent(),$,D,D===A,l);if("ol"===A||"ul"===A)return c($,D);var k=!1;return angular.forEach($.children(),function(e){e.tagName.match(s)&&(k=!0)}),k?u($.children(),$,D):u([angular.element("<div>"+C.innerHTML+"</div>")[0]],$,D)}if(A.match(s)){if(E=t.getOnlySelectedElements(),0===E.length)y=angular.element("<"+D+"><li>"+C.innerHTML+"</li></"+D+">"),$.html(""),$.append(y);else{if(1===E.length&&("ol"===E[0].tagName.toLowerCase()||"ul"===E[0].tagName.toLowerCase()))return E[0].tagName.toLowerCase()===D?o(angular.element(E[0]),l):c(angular.element(E[0]),D);b="";var L=[];for(v=0;v<E.length;v++)if(3!==E[v].nodeType){var _=angular.element(E[v]);if("li"===E[v].tagName.toLowerCase())continue;"ol"===E[v].tagName.toLowerCase()||"ul"===E[v].tagName.toLowerCase()?b+=_[0].innerHTML:"span"!==E[v].tagName.toLowerCase()||"ol"!==E[v].childNodes[0].tagName.toLowerCase()&&"ul"!==E[v].childNodes[0].tagName.toLowerCase()?b+="<"+n("li")+">"+_[0].innerHTML+"</"+n("li")+">":b+=_[0].childNodes[0].innerHTML,L.unshift(_)}y=angular.element("<"+D+">"+b+"</"+D+">"),L.pop().replaceWith(y),angular.forEach(L,function(e){e.remove()})}return void t.setSelectionToElementEnd(y[0])}}else{if("formatblock"===p.toLowerCase()){for(S=g.toLowerCase().replace(/[<>]/gi,""),"default"===S.trim()&&(S=l,g="<"+l+">"),y="li"===A?$.parent():$;!y[0].tagName||!y[0].tagName.match(s)&&!y.parent().attr("contenteditable");)y=y.parent(),A=(y[0].tagName||"").toLowerCase();if(A===S){E=y.children();var M=!1;for(v=0;v<E.length;v++)M=M||E[v].tagName.match(s);M?(y.after(E),w=y.next(),y.remove(),y=w):(T.append(y[0].childNodes),y.after(T),y.remove(),y=T)}else if(y.parent()[0].tagName.toLowerCase()!==S||y.parent().hasClass("ta-bind"))if(A.match(/^(ul|li|ol)$/i))y.wrap(g);else{for(E=t.getOnlySelectedElements(),0===E.length&&(E=[y[0]]),v=0;v<E.length;v++)if(3===E[v].nodeType||!E[v].tagName.match(s))for(;3===E[v].nodeType||!E[v].tagName||!E[v].tagName.match(s);)E[v]=E[v].parentNode;if(E=E.filter(function(e,t,n){return n.indexOf(e)===t}),E.length>1&&(E=E.filter(function(e,t,n){return!("div"===e.nodeName.toLowerCase()&&/^taTextElement/.test(e.id))})),angular.element(E[0]).hasClass("ta-bind"))y=angular.element(g),y[0].innerHTML=E[0].innerHTML,E[0].innerHTML=y[0].outerHTML;else if("blockquote"===S){for(b="",v=0;v<E.length;v++)b+=E[v].outerHTML;for(y=angular.element(g),y[0].innerHTML=b,E[0].parentNode.insertBefore(y[0],E[0]),v=E.length-1;v>=0;v--)E[v].parentNode&&E[v].parentNode.removeChild(E[v])}else if("pre"===S&&t.getStateShiftKey()){for(b="",v=0;v<E.length;v++)b+=E[v].outerHTML;for(y=angular.element(g),y[0].innerHTML=b,E[0].parentNode.insertBefore(y[0],E[0]),v=E.length-1;v>=0;v--)E[v].parentNode&&E[v].parentNode.removeChild(E[v])}else for(v=0;v<E.length;v++){var H=d(E[v],g);E[v]===y[0]&&(y=angular.element(H))}}else{var B=y.parent(),P=B.contents();for(v=0;v<P.length;v++)B.parent().hasClass("ta-bind")&&3===P[v].nodeType&&(T=angular.element("<"+l+">"),T[0].innerHTML=P[v].outerHTML,P[v]=T[0]),B.parent()[0].insertBefore(P[v],B[0]);B.remove()}return t.setSelectionToElementEnd(y[0]),void y[0].focus()}if("createlink"===p.toLowerCase()){if("a"===A)return void(t.getSelectionElement().href=g);var I='<a href="'+g+'" target="'+(m.a.target?m.a.target:"")+'">';if(t.getSelection().collapsed)t.insertHtml(I+g+"</a>",f);else if(e.getSelection().getRangeAt(0).canSurroundContents()){var U=angular.element(I+"</a>")[0];e.getSelection().getRangeAt(0).surroundContents(U)}return}if("inserthtml"===p.toLowerCase())return void t.insertHtml(g,f)}try{r[0].execCommand(p,h,g)}catch(e){}}}}}]).service("taSelection",["$document","taDOM","$log",function(t,n,r){var o,a=t[0],i=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},c={getSelection:function(){var t;try{t=e.getSelection().getRangeAt(0)}catch(e){return}var n=t.commonAncestorContainer,r={start:i(t.startContainer,t.startOffset),end:i(t.endContainer,t.endOffset),collapsed:t.collapsed};return 3===n.nodeType&&("div"===n.parentNode.nodeName.toLowerCase()&&/^taTextElement/.test(n.parentNode.id)||(n=n.parentNode)),"div"===n.nodeName.toLowerCase()&&/^taTextElement/.test(n.id)?(r.start.element=n.childNodes[r.start.offset],r.end.element=n.childNodes[r.end.offset],r.container=n):n.parentNode===r.start.element||n.parentNode===r.end.element?r.container=n.parentNode:r.container=n,r},updateLeftArrowKey:function(t){var n=e.getSelection().getRangeAt(0);if(n&&n.collapsed){var r=c.getFlattenedDom(n);if(!r.findIndex)return;var o,a=n.startContainer,i=r.findIndex(function(e,t){return e.node===a||e.parents.indexOf(a)!==-1});if(r.forEach(function(e,t){e.parents.forEach(function(e,t){})}),i+1<r.length&&(o=r[i+1].node),o&&o.textContent&&/^\ufeff([^\ufeff]*)$/.exec(o.textContent))return;var s;if(i>0&&(s=r[i-1].node),0===n.startOffset&&s&&/^\ufeff([^\ufeff]*)$/.exec(s.textContent))return void c.setSelectionToElementEnd(s)}},updateRightArrowKey:function(e){},getFlattenedDom:function(e){function t(e){e.node.childNodes.length?Array.prototype.slice.call(e.node.childNodes).forEach(function(n){var r=e.parents.slice();r.slice(-1)[0]!==e.node&&r.push(e.node),t({parents:r,node:n})}):r.push({parents:e.parents,node:e.node})}var n=e.commonAncestorContainer.parentNode;if(!n)return e.commonAncestorContainer.childNodes;var r=Array.prototype.slice.call(n.childNodes),o=r.indexOf(e.startContainer);return o+1<r.length&&o>0||n.parentNode&&(n=n.parentNode),r=[],t({parents:[n],node:n}),r},getOnlySelectedElements:function(){var t=e.getSelection().getRangeAt(0),n=t.commonAncestorContainer;return n=3===n.nodeType?n.parentNode:n,t.getNodes([1],function(e){return e.parentNode===n})},getAllSelectedElements:function(){var t=e.getSelection().getRangeAt(0),n=t.commonAncestorContainer;n=3===n.nodeType?n.parentNode:n;var r=t.getNodes([1],function(e){return e.parentNode===n}),o=n.innerHTML;if((o=o.replace(/<span id=.selectionBoundary[^>]+>\ufeff?<\/span>/gi,""))===t.toHtml()&&("div"!==n.nodeName.toLowerCase()||!/^taTextElement/.test(n.id))){for(var a=[],i=r.length;i--;a.unshift(r[i]));r=a,r.push(n)}return r},getSelectionElement:function(){return c.getSelection()?c.getSelection().container:void 0},setSelection:function(t,n,r,o){var a=e.createRange();a.setStart(t,r),a.setEnd(n,o),e.getSelection().setSingleRange(a)},setSelectionBeforeElement:function(t){var n=e.createRange();n.selectNode(t),n.collapse(!0),e.getSelection().setSingleRange(n)},setSelectionAfterElement:function(t){var n=e.createRange();n.selectNode(t),n.collapse(!1),e.getSelection().setSingleRange(n)},setSelectionToElementStart:function(t){var n=e.createRange();n.selectNodeContents(t),n.collapse(!0),e.getSelection().setSingleRange(n)},setSelectionToElementEnd:function(t){var n=e.createRange();n.selectNodeContents(t),n.collapse(!1),t.childNodes&&t.childNodes[t.childNodes.length-1]&&"br"===t.childNodes[t.childNodes.length-1].nodeName&&(n.startOffset=n.endOffset=n.startOffset-1),e.getSelection().setSingleRange(n)},setStateShiftKey:function(e){o=e},getStateShiftKey:function(){return o},insertHtml:function(t,r){var o,i,u,d,f,p,h,g=angular.element("<div>"+t+"</div>"),m=e.getSelection().getRangeAt(0),v=a.createDocumentFragment(),y=g[0].childNodes,b=!0;if(y.length>0){for(d=[],u=0;u<y.length;u++){var E=y[u];"p"===E.nodeName.toLowerCase()&&""===E.innerHTML.trim()||(b=b&&!s.test(E.nodeName),d.push(E))}for(var w=0;w<d.length;w++)p=v.appendChild(d[w]);!b&&m.collapsed&&/^(|<br(|\/)>)$/i.test(m.startContainer.innerHTML)&&m.selectNode(m.startContainer)}else b=!0,p=v=a.createTextNode(t);if(b)m.deleteContents();else if(m.collapsed&&m.startContainer!==r)if(m.startContainer.innerHTML&&m.startContainer.innerHTML.match(/^<[^>]*>$/i))o=m.startContainer,1===m.startOffset?(m.setStartAfter(o),m.setEndAfter(o)):(m.setStartBefore(o),m.setEndBefore(o));else{if(3===m.startContainer.nodeType&&m.startContainer.parentNode!==r)for(o=m.startContainer.parentNode,i=o.cloneNode(),n.splitNodes(o.childNodes,o,i,m.startContainer,m.startOffset);!l.test(o.nodeName);){angular.element(o).after(i),o=o.parentNode;var S=i;i=o.cloneNode(),n.splitNodes(o.childNodes,o,i,S)}else o=m.startContainer,i=o.cloneNode(),n.splitNodes(o.childNodes,o,i,void 0,void 0,m.startOffset);if(angular.element(o).after(i),m.setStartAfter(o),m.setEndAfter(o),/^(|<br(|\/)>)$/i.test(o.innerHTML.trim())&&(m.setStartBefore(o),m.setEndBefore(o),angular.element(o).remove()),/^(|<br(|\/)>)$/i.test(i.innerHTML.trim())&&angular.element(i).remove(),"li"===o.nodeName.toLowerCase()){for(h=a.createDocumentFragment(),f=0;f<v.childNodes.length;f++)g=angular.element("<li>"),n.transferChildNodes(v.childNodes[f],g[0]),n.transferNodeAttributes(v.childNodes[f],g[0]),h.appendChild(g[0]);v=h,p&&(p=v.childNodes[v.childNodes.length-1],p=p.childNodes[p.childNodes.length-1])}}else m.deleteContents();m.insertNode(v),p&&c.setSelectionToElementEnd(p)}};return c}]).service("taDOM",function(){var e={getByAttribute:function(t,n){var r=[],o=t.children();return o.length&&angular.forEach(o,function(t){r=r.concat(e.getByAttribute(angular.element(t),n))}),void 0!==t.attr(n)&&r.push(t),r},transferChildNodes:function(e,t){for(t.innerHTML="";e.childNodes.length>0;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(t,n,r,o,a,i){if(!o&&isNaN(i))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var s=document.createDocumentFragment(),l=document.createDocumentFragment(),c=0;t.length>0&&(isNaN(i)||i!==c)&&t[0]!==o;)s.appendChild(t[0]),c++;for(!isNaN(a)&&a>=0&&t[0]&&(s.appendChild(document.createTextNode(t[0].nodeValue.substring(0,a))),t[0].nodeValue=t[0].nodeValue.substring(a));t.length>0;)l.appendChild(t[0]);e.transferChildNodes(s,n),e.transferChildNodes(l,r)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return e}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var o=parseInt(e.$eval(n.taMaxText));if(isNaN(o))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(o=parseInt(e),isNaN(o))throw"Max text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=o}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var o=parseInt(e.$eval(n.taMinText));if(isNaN(o))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(o=parseInt(e),isNaN(o))throw"Min text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=o}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){return function(e){return!e||""===r(e)&&!/<img[^>]+>/.test(e)}}]).directive("taButton",[function(){return{link:function(e,t,n){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(t,n,r,o,i,c,f,p,h,g,m,y,b){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(i,y,E,w){function S(e){var t;return W.forEach(function(n){if(n.keyCode===e.keyCode){var r=(e.metaKey?P:0)+(e.ctrlKey?B:0)+(e.shiftKey?U:0)+(e.altKey?I:0);if(n.forbiddenModifiers&r)return;n.mustHaveModifiers.every(function(e){return r&e})&&(t=n.specialKey)}}),t}var C,x,T,N=w[0],R=w[1]||{},$=void 0!==y.attr("contenteditable")&&y.attr("contenteditable"),A=$||"textarea"===y[0].tagName.toLowerCase()||"input"===y[0].tagName.toLowerCase(),D=!1,O=!1,k=!1,L=E.taUnsafeSanitizer||h.disableSanitizer,_=E.taKeepStyles||h.keepStyles,M=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,H=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,B=1,P=2,I=4,U=8,W=[{specialKey:"UndoKey",forbiddenModifiers:I+U,mustHaveModifiers:[P+B],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:I,mustHaveModifiers:[P+B,U],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:I+U,mustHaveModifiers:[P+B],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:P+U+I+B,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:P+I+B,mustHaveModifiers:[U],keyCode:9}];void 0===E.taDefaultWrap&&(E.taDefaultWrap="p"),""===E.taDefaultWrap?(T="",void 0===a.ie||a.ie>=11||a.ie):(T=void 0===a.ie||a.ie>=11?"br"===E.taDefaultWrap.toLowerCase()?"<BR><BR>":"<"+E.taDefaultWrap+"><br></"+E.taDefaultWrap+">":a.ie<=8?"<"+E.taDefaultWrap.toUpperCase()+"></"+E.taDefaultWrap.toUpperCase()+">":"<"+E.taDefaultWrap+"></"+E.taDefaultWrap+">",void 0===a.ie||a.ie>=11?"br"===E.taDefaultWrap.toLowerCase()||(E.taDefaultWrap,E.taDefaultWrap):a.ie<=8?(E.taDefaultWrap.toUpperCase(),E.taDefaultWrap.toUpperCase()):(E.taDefaultWrap,E.taDefaultWrap)),R.$options||(R.$options={});var z=function(e){if(g(e))return e;var t=angular.element("<div>"+e+"</div>");if(0===t.children().length)e="<"+E.taDefaultWrap+">"+e+"</"+E.taDefaultWrap+">";else{var n,r=t[0].childNodes,o=!1;for(n=0;n<r.length&&!(o=r[n].nodeName.toLowerCase().match(s));n++);if(o)for(e="",n=0;n<r.length;n++){var a=r[n],i=a.nodeName.toLowerCase();if("#comment"===i)e+="<!--"+a.nodeValue+"-->";else if("#text"===i){var l=a.textContent;l.trim()?e+="<"+E.taDefaultWrap+">"+l+"</"+E.taDefaultWrap+">":e+=l}else if(i.match(s))e+=a.outerHTML;else{var c=a.outerHTML||a.nodeValue;""!==c.trim()?e+="<"+E.taDefaultWrap+">"+c+"</"+E.taDefaultWrap+">":e+=c}}else e="<"+E.taDefaultWrap+">"+e+"</"+E.taDefaultWrap+">"}return e};E.taPaste&&(x=m(E.taPaste)),y.addClass("ta-bind");var F;i["$undoManager"+(E.id||"")]=N.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return void 0===e||null===e||void 0!==this.current()&&null!==this.current()&&e===this.current()?e:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),F&&n.cancel(F),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,e)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){if(!(e<0||e>this._stack.length-1))return this._index=e,this.current()},current:function(){return this._stack[this._index]}};var Y,V=function(){if($)return y[0].innerHTML;if(A)return y.val();throw"textAngular Error: attempting to update non-editable taBind"},q=function(e){return i.$emit("ta-element-select",this),e.preventDefault(),!1},K=i["reApplyOnSelectorHandlers"+(E.id||"")]=function(){D||angular.forEach(f,function(e){y.find(e).off("click",q).on("click",q)})},j=function(e,t,n){k=n||!1,void 0!==t&&null!==t||(t=$),void 0!==e&&null!==e||(e=V()),g(e)?(""!==N.$viewValue&&N.$setViewValue(""),t&&""!==N.$undoManager.current()&&N.$undoManager.push("")):(K(),N.$viewValue!==e&&(N.$setViewValue(e),t&&N.$undoManager.push(e))),N.$render()},X=function(e){y[0].innerHTML=e},G=i["$undoTaBind"+(E.id||"")]=function(){if(!D&&$){var e=N.$undoManager.undo();void 0!==e&&null!==e&&(X(e),j(e,!1),Y&&n.cancel(Y),Y=n(function(){y[0].focus(),c.setSelectionToElementEnd(y[0])},1))}},Z=i["$redoTaBind"+(E.id||"")]=function(){if(!D&&$){var e=N.$undoManager.redo();void 0!==e&&null!==e&&(X(e),j(e,!1),Y&&n.cancel(Y),Y=n(function(){y[0].focus(),c.setSelectionToElementEnd(y[0])},1))}};i["updateTaBind"+(E.id||"")]=function(){D||j(void 0,void 0,!0)};var Q=function(e){return N.$oldViewValue=t(o(e,_),N.$oldViewValue,L)};if(y.attr("required")&&(N.$validators.required=function(e,t){return!g(e||t)}),N.$parsers.push(Q),N.$parsers.unshift(z),N.$formatters.push(Q),N.$formatters.unshift(z),N.$formatters.unshift(function(e){return N.$undoManager.push(e||"")}),A)if(i.events={},$){var J=!1,ee=function(e){var r=void 0!==e&&e.match(/content=["']*OneNote.File/i);if(e&&e.trim().length){if(e.match(/class=["']*Mso(Normal|List)/i)||e.match(/content=["']*Word.Document/i)||e.match(/content=["']*OneNote.File/i)){var o=e.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);o=o?o[1]:e,o=o.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var a=angular.element("<div>"+o+"</div>"),s=angular.element("<div></div>"),l={element:null,lastIndent:[],lastLi:null,isUl:!1};l.lastIndent.peek=function(){var e=this.length;if(e>0)return this[e-1]};for(var u=function(e){l.isUl=e,l.element=angular.element(e?"<ul>":"<ol>"),l.lastIndent=[],l.lastIndent.peek=function(){var e=this.length;if(e>0)return this[e-1]},l.lastLevelMatch=null},d=0;d<=a[0].childNodes.length;d++)if(a[0].childNodes[d]&&"#text"!==a[0].childNodes[d].nodeName){var f=a[0].childNodes[d].tagName.toLowerCase();if("p"===f||"ul"===f||"h1"===f||"h2"===f||"h3"===f||"h4"===f||"h5"===f||"h6"===f||"table"===f){var p=angular.element(a[0].childNodes[d]),h=(p.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(h){if(p[0].childNodes.length<2||p[0].childNodes[1].childNodes.length<1)continue;var g="bullet"===h[1].toLowerCase()||"number"!==h[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(p[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(p[0].childNodes[1].childNodes[0].innerHTML)),m=(p.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),v=parseFloat(m?m[1]:0),b=(p.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(b&&b[2]&&(v=parseInt(b[2])),b&&(!l.lastLevelMatch||b[1]!==l.lastLevelMatch[1])||!h[3]||"first"===h[3].toLowerCase()||null===l.lastIndent.peek()||l.isUl!==g&&l.lastIndent.peek()===v)u(g),s.append(l.element);else if(null!=l.lastIndent.peek()&&l.lastIndent.peek()<v)l.element=angular.element(g?"<ul>":"<ol>"),l.lastLi.append(l.element);else if(null!=l.lastIndent.peek()&&l.lastIndent.peek()>v){for(;null!=l.lastIndent.peek()&&l.lastIndent.peek()>v;)if("li"!==l.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(l.element.parent()[0].tagName.toLowerCase()))break;l.element=l.element.parent(),l.lastIndent.pop()}else l.element=l.element.parent();l.isUl="ul"===l.element[0].tagName.toLowerCase(),g!==l.isUl&&(u(g),s.append(l.element))}l.lastLevelMatch=b,v!==l.lastIndent.peek()&&l.lastIndent.push(v),l.lastLi=angular.element("<li>"),l.element.append(l.lastLi),l.lastLi.html(p.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),p.remove()}else u(!1),s.append(p)}}var E=function(e){e=angular.element(e);for(var t=e[0].childNodes.length-1;t>=0;t--)e.after(e[0].childNodes[t]);e.remove()};angular.forEach(s.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&E(e)}),angular.forEach(s.find("font"),E),e=s.html(),r&&(e=s.html()||a.html()),e=e.replace(/\n/g," ")}else{if(e=e.replace(/<(|\/)meta[^>]*?>/gi,""),e.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(e.match(/<[^>]*?(text-angular)[^>]*?>/)){var w=angular.element("<div>"+e+"</div>");w.find("textarea").remove();for(var S=0;S<binds.length;S++){for(var C=binds[S][0].parentNode.parentNode,T=0;T<binds[S][0].childNodes.length;T++)C.parentNode.insertBefore(binds[S][0].childNodes[T],C);C.parentNode.removeChild(C)}e=w.html().replace('<br class="Apple-interchange-newline">',"")}}else e.match(/^<span/)&&(e.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(e=e.replace(/<(|\/)span[^>]*?>/gi,"")));e=e.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(e)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(e)===!1&&(e=e.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),e=e.replace(/^[ |\u00A0]+/gm,function(e){for(var t="",n=0;n<e.length;n++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),x&&(e=x(i,{$html:e})||e),e=e.replace(/<span style=("|')([^<]*?)vertical-align\s*:\s*super;?([^>]*?)("|')>([^<]+?)<\/span>/g,"<sup style='$2$3'>$5</sup>"),e=t(e,"",L),c.insertHtml(e,y[0]),n(function(){N.$setViewValue(V()),J=!1,y.removeClass("processing-paste")},0)}else J=!1,y.removeClass("processing-paste")};y.on("paste",i.events.paste=function(t,o){if(o&&angular.extend(t,o),D||J)return t.stopPropagation(),t.preventDefault(),!1;J=!0,y.addClass("processing-paste");var a,i=(t.originalEvent||t).clipboardData;if(!i&&window.clipboardData&&window.clipboardData.getData)return a=window.clipboardData.getData("Text"),ee(a),t.stopPropagation(),t.preventDefault(),!1;if(i&&i.getData&&i.types.length>0){for(var s="",l=0;l<i.types.length;l++)s+=" "+i.types[l];return/text\/html/i.test(s)?a=i.getData("text/html"):/text\/plain/i.test(s)&&(a=i.getData("text/plain")),ee(a),t.stopPropagation(),t.preventDefault(),!1}var c=e.saveSelection(),u=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');r.find("body").append(u),u[0].focus(),n(function(){e.restoreSelection(c),ee(u[0].innerHTML),y[0].focus(),u.remove()},0)}),y.on("cut",i.events.cut=function(e){D?e.preventDefault():n(function(){N.$setViewValue(V())},0)}),y.on("keydown",i.events.keydown=function(e,t){t&&angular.extend(e,t),16===e.keyCode?c.setStateShiftKey(!0):c.setStateShiftKey(!1),e.specialKey=S(e);var n;if(h.keyMappings.forEach(function(t){e.specialKey===t.commandKeyCode&&(e.specialKey=void 0),t.testForKey(e)&&(n=t.commandKeyCode),"UndoKey"!==t.commandKeyCode&&"RedoKey"!==t.commandKeyCode||t.enablePropagation||e.preventDefault()}),void 0!==n&&(e.specialKey=n),void 0===e.specialKey||"UndoKey"===e.specialKey&&"RedoKey"===e.specialKey||(e.preventDefault(),b.sendKeyCommand(i,e)),!(D||("UndoKey"===e.specialKey&&(G(),e.preventDefault()),"RedoKey"===e.specialKey&&(Z(),e.preventDefault()),13!==e.keyCode||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey))){var r,o=c.getSelectionElement();if(!o.nodeName.match(l))return;var a=angular.element(T),s=["blockquote","ul","ol"];if(function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}(s,o.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(o.innerHTML.trim())&&!o.nextSibling){r=angular.element(o);var u=r.parent();u.after(a),r.remove(),0===u.children().length&&u.remove(),c.setSelectionToElementStart(a[0]),e.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(o.innerHTML.trim())&&(r=angular.element(o),r.after(a),r.remove(),c.setSelectionToElementStart(a[0]),e.preventDefault())}}});var te;y.on("keyup",i.events.keyup=function(e,t){if(t&&angular.extend(e,t),c.setStateShiftKey(!1),9===e.keyCode)return void(c.getSelection().start.element===y[0]&&y.children().length&&c.setSelectionToElementStart(y.children()[0]));if(37!==e.keyCode||e.shiftKey||c.updateLeftArrowKey(y),39!==e.keyCode||e.shiftKey||c.updateRightArrowKey(y),F&&n.cancel(F),!D&&!M.test(e.keyCode))if(13===e.keyCode&&(e.ctrlKey||e.metaKey||e.altKey));else{if(""!==T&&"<BR><BR>"!==T&&13===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.altKey){for(var r=c.getSelectionElement();!r.nodeName.match(l)&&r!==y[0];)r=r.parentNode;if(e.shiftKey){var o=r.tagName.toLowerCase();if((o===E.taDefaultWrap||"li"===o||"pre"===o||"div"===o)&&!/.+<br><br>/.test(r.innerHTML.trim())){var a=r.previousSibling;a&&(a.innerHTML=a.innerHTML+"<br><br>",angular.element(r).remove(),c.setSelectionToElementEnd(a))}}else if(r.tagName.toLowerCase()!==E.taDefaultWrap&&"li"!==r.nodeName.toLowerCase()&&(""===r.innerHTML.trim()||"<br>"===r.innerHTML.trim())){var i=angular.element(T);angular.element(r).replaceWith(i),c.setSelectionToElementStart(i[0])}}var s=V();""===T||""!==s.trim()&&"<br>"!==s.trim()?"<"!==s.substring(0,1)&&E.taDefaultWrap:(X(T),c.setSelectionToElementStart(y.children()[0]));var u=C!==e.keyCode&&H.test(e.keyCode);te&&n.cancel(te),te=n(function(){j(s,u,!0)},R.$options.debounce||400),u||(F=n(function(){N.$undoManager.push(s)},250)),C=e.keyCode}});var ne;if(y.on("input",function(){V()!==N.$viewValue&&(ne&&n.cancel(ne),ne=n(function(){var t=e.saveSelection(),n=V();n!==N.$viewValue&&j(n,!0),0!==N.$viewValue.length&&e.restoreSelection(t)},1e3))}),y.on("blur",i.events.blur=function(){O=!1,D?(k=!0,N.$render()):j(void 0,void 0,!0)}),E.placeholder&&(a.ie>8||void 0===a.ie)){var re;if(!E.id)throw"textAngular Error: An unique ID is required for placeholders to work";re=u("#"+E.id+".placeholder-text:before",'content: "'+E.placeholder+'"'),i.$on("$destroy",function(){d(re)})}y.on("focus",i.events.focus=function(){O=!0,y.removeClass("placeholder-text"),K()}),y.on("mouseup",i.events.mouseup=function(){var e=c.getSelection();e&&e.start.element===y[0]&&y.children().length&&c.setSelectionToElementStart(y.children()[0])}),y.on("mousedown",i.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else{y.on("change blur",i.events.change=i.events.blur=function(){D||N.$setViewValue(V())}),y.on("keydown",i.events.keydown=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=this.selectionStart,r=this.selectionEnd,o=y.val();if(e.shiftKey){var a=o.lastIndexOf("\n",n),i=o.lastIndexOf("\t",n);i!==-1&&i>=a&&(y.val(o.substring(0,i)+o.substring(i+1)),this.selectionStart=this.selectionEnd=n-1)}else y.val(o.substring(0,n)+"\t"+o.substring(r)),this.selectionStart=this.selectionEnd=n+1;e.preventDefault()}});var oe=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},ae=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},ie=function(e,t){var n="",r=e.childNodes;return t++,n+=oe("\t",t-1)+e.outerHTML.substring(0,4),ae(r,function(e,r){var o=r.nodeName.toLowerCase();return"#comment"===o?void(n+="<!--"+r.nodeValue+"-->"):"#text"===o?void(n+=r.textContent):void(r.outerHTML&&(n+="ul"===o||"ol"===o?"\n"+ie(r,t):"\n"+oe("\t",t)+r.outerHTML))}),n+="\n"+oe("\t",t-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))};N.$formatters.unshift(function(e){var t=angular.element("<div>"+e+"</div>")[0].childNodes;return t.length>0&&(e="",ae(t,function(t,n){var r=n.nodeName.toLowerCase();return"#comment"===r?void(e+="<!--"+n.nodeValue+"-->"):"#text"===r?void(e+=n.textContent):void(n.outerHTML&&(e.length>0&&(e+="\n"),e+="ul"===r||"ol"===r?""+ie(n,0):""+n.outerHTML))})),e})}var se,le=function(e,t){if(t&&angular.extend(e,t),!v&&!D){v=!0;var r;r=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,i.$emit("ta-drop-event",this,e,r),n(function(){v=!1,j(void 0,void 0,!0)},100)}},ce=!1;N.$render=function(){if(!ce){ce=!0;var e=N.$viewValue||"";k||($&&O&&(y.removeClass("placeholder-text"),se&&n.cancel(se),se=n(function(){O||(y[0].focus(),c.setSelectionToElementEnd(y.children()[y.children().length-1])),se=void 0},1)),$?(X((E.placeholder,""===e?T:e)),D?y.off("drop",le):(K(),y.on("drop",le))):"textarea"!==y[0].tagName.toLowerCase()&&"input"!==y[0].tagName.toLowerCase()?X(p(e)):y.val(e)),$&&E.placeholder&&(""===e?O?y.removeClass("placeholder-text"):y.addClass("placeholder-text"):y.removeClass("placeholder-text")),ce=k=!1}},E.taReadonly&&(D=i.$eval(E.taReadonly),D?(y.addClass("ta-readonly"),"textarea"!==y[0].tagName.toLowerCase()&&"input"!==y[0].tagName.toLowerCase()||y.attr("disabled","disabled"),void 0!==y.attr("contenteditable")&&y.attr("contenteditable")&&y.removeAttr("contenteditable")):(y.removeClass("ta-readonly"),"textarea"===y[0].tagName.toLowerCase()||"input"===y[0].tagName.toLowerCase()?y.removeAttr("disabled"):$&&y.attr("contenteditable","true")),i.$watch(E.taReadonly,function(e,t){t!==e&&(e?(y.addClass("ta-readonly"),"textarea"!==y[0].tagName.toLowerCase()&&"input"!==y[0].tagName.toLowerCase()||y.attr("disabled","disabled"),void 0!==y.attr("contenteditable")&&y.attr("contenteditable")&&y.removeAttr("contenteditable"),angular.forEach(f,function(e){y.find(e).on("click",q)}),y.off("drop",le)):(y.removeClass("ta-readonly"),"textarea"===y[0].tagName.toLowerCase()||"input"===y[0].tagName.toLowerCase()?y.removeAttr("disabled"):$&&y.attr("contenteditable","true"),angular.forEach(f,function(e){y.find(e).off("click",q)}),y.on("drop",le)),D=e)})),$&&!D&&(angular.forEach(f,function(e){y.find(e).on("click",q)}),y.on("drop",le))}}}]);var v=!1,y=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);return y.config([function(){angular.forEach(o,function(e,t){delete o[t]})}]),y.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$document","$animate","$log","$q","$parse",function(t,n,r,o,a,i,s,l,c,u,d){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(f,p,h,g){var m,v,y,b,E,w,S,C,x,T,N,R,$=h.serial?h.serial:Math.floor(1e16*Math.random());f._name=h.name?h.name:"textAngularEditor"+$;var A=function(e,t,r){n(function(){e.one(t,r)},100)};if(x=a(h.taDefaultWrap),angular.extend(f,angular.copy(r),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?f["$undoTaBindtaTextElement"+$]():"redo"===e.toLowerCase()?f["$redoTaBindtaTextElement"+$]():(x(e,!1,t,f.defaultTagAttributes),n&&f["reApplyOnSelectorHandlerstaTextElement"+$](),f.displayElements.text[0].focus())},showHtml:f.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(f.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(f.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(f.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(f.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch(e){c.error(e)}h.taTextEditorSetup&&(f.setup.textEditorSetup=f.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(f.setup.htmlEditorSetup=f.$parent.$eval(h.taHtmlEditorSetup)),h.taFileDrop?f.fileDropHandler=f.$parent.$eval(h.taFileDrop):f.fileDropHandler=f.defaultFileDropHandler,S=p[0].innerHTML,p[0].innerHTML="",f.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},f.displayElements.popover.append(f.displayElements.popoverArrow),f.displayElements.popover.append(f.displayElements.popoverContainer),f.displayElements.scrollWindow.append(f.displayElements.popover),f.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),f.handlePopoverEvents=function(){"block"===f.displayElements.popover.css("display")&&(R&&n.cancel(R),R=n(function(){f.reflowPopover(f.resizeElement),f.reflowResizeOverlay(f.resizeElement)},100))},angular.element(window).on("resize",f.handlePopoverEvents),angular.element(window).on("scroll",f.handlePopoverEvents);var D=function(e){var t,n={vertical:!1,horizontal:!1};try{if(null===(t=window.getComputedStyle(e)))return n}catch(e){return n}var r=t["overflow-y"],o=t["overflow-x"];return{vertical:("scroll"===r||"auto"===r)&&e.scrollHeight>e.clientHeight,horizontal:("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth}};f.getScrollTop=function(e,t){var n=e.scrollTop;return void 0===n&&(n=0),t&&D(e).vertical&&(e.removeEventListener("scroll",f._scrollListener,!1),e.addEventListener("scroll",f._scrollListener,!1)),0!==n?{node:e.nodeName,top:n}:e.parentNode?f.getScrollTop(e.parentNode,t):{node:"<none>",top:0}},f.showPopover=function(e){f.getScrollTop(f.displayElements.scrollWindow[0],!0),f.displayElements.popover.css("display","block"),n(function(){f.displayElements.resize.overlay.css("display","block")}),f.resizeElement=e,f.reflowPopover(e),l.addClass(f.displayElements.popover,"in"),A(s.find("body"),"click keyup",function(){f.hidePopover()})},f._scrollListener=function(e,t){f.handlePopoverEvents()},f.reflowPopover=function(e){var t=f.getScrollTop(f.displayElements.scrollWindow[0],!1);e[0].offsetTop-t.top<51?(f.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("top").addClass("bottom")):(f.displayElements.popover.css("top",e[0].offsetTop-54+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("bottom").addClass("top"));var n=f.displayElements.text[0].offsetWidth-f.displayElements.popover[0].offsetWidth,r=e[0].offsetLeft+e[0].offsetWidth/2-f.displayElements.popover[0].offsetWidth/2,o=Math.max(0,Math.min(n,r)),a=Math.min(r,Math.max(0,r-n))-11;o+=window.scrollX,a-=window.scrollX,f.displayElements.popover.css("left",o+"px"),f.displayElements.popoverArrow.css("margin-left",a+"px")},f.hidePopover=function(){f.displayElements.popover.css("display","none"),f.displayElements.popoverContainer.attr("style",""),f.displayElements.popoverContainer.attr("class","popover-content"),f.displayElements.popover.removeClass("in"),f.displayElements.resize.overlay.css("display","none")},f.displayElements.resize.overlay.append(f.displayElements.resize.background),angular.forEach(f.displayElements.resize.anchors,function(e){f.displayElements.resize.overlay.append(e)}),f.displayElements.resize.overlay.append(f.displayElements.resize.info),f.displayElements.scrollWindow.append(f.displayElements.resize.overlay),f.displayElements.resize.background.on("click",function(e){f.displayElements.text[0].focus()}),f.reflowResizeOverlay=function(e){e=angular.element(e)[0],f.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),f.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},f.showResizeOverlay=function(e){var t=s.find("body");T=function(n){var r={width:parseInt(e.attr("width")),height:parseInt(e.attr("height")),x:n.clientX,y:n.clientY};(void 0===r.width||isNaN(r.width))&&(r.width=e[0].offsetWidth),(void 0===r.height||isNaN(r.height))&&(r.height=e[0].offsetHeight),f.hidePopover();var o=r.height/r.width,a=function(t){function n(e){return Math.round(Math.max(0,e))}var a={x:Math.max(0,r.width+(t.clientX-r.x)),y:Math.max(0,r.height+(t.clientY-r.y))},i=void 0!==h.taResizeForceAspectRatio,s=h.taResizeMaintainAspectRatio;if(i||s&&!t.shiftKey){var l=a.y/a.x;a.x=o>l?a.x:a.y/o,a.y=o>l?a.x*o:a.y}var c=angular.element(e);c.css("height",n(a.y)+"px"),c.css("width",n(a.x)+"px"),f.reflowResizeOverlay(e)};t.on("mousemove",a),A(t,"mouseup",function(e){e.preventDefault(),e.stopPropagation(),t.off("mousemove",a),f.$apply(function(){f.hidePopover(),f.updateTaBindtaTextElement()},100)}),n.stopPropagation(),n.preventDefault()},f.displayElements.resize.anchors[3].off("mousedown"),f.displayElements.resize.anchors[3].on("mousedown",T),f.reflowResizeOverlay(e),A(t,"click",function(){f.hideResizeOverlay()})},f.hideResizeOverlay=function(){f.displayElements.resize.anchors[3].off("mousedown",T),f.displayElements.resize.overlay.css("display","none")},f.setup.htmlEditorSetup(f.displayElements.html),f.setup.textEditorSetup(f.displayElements.text),f.displayElements.html.attr({id:"taHtmlElement"+$,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.text.attr({id:"taTextElement"+$,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&f.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(f.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),f.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),h.taKeepStyles&&(f.displayElements.text.attr("ta-keep-styles",h.taKeepStyles),f.displayElements.html.attr("ta-keep-styles",h.taKeepStyles)),f.displayElements.scrollWindow.append(f.displayElements.text),p.append(f.displayElements.scrollWindow),p.append(f.displayElements.html),f.displayElements.forminput.attr("name",f._name),p.append(f.displayElements.forminput),h.tabindex&&(p.removeAttr("tabindex"),f.displayElements.text.attr("tabindex",h.tabindex),f.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(f.displayElements.text.attr("placeholder",h.placeholder),f.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(f.displayElements.text.attr("ta-readonly","disabled"),f.displayElements.html.attr("ta-readonly","disabled"),f.disabled=f.$parent.$eval(h.taDisabled),f.$parent.$watch(h.taDisabled,function(e){f.disabled=e,f.disabled?p.addClass(f.classes.disabled):p.removeClass(f.classes.disabled)})),h.taPaste&&(f._pasteHandler=function(e){return d(h.taPaste)(f.$parent,{$html:e})},f.displayElements.text.attr("ta-paste","_pasteHandler($html)")),t(f.displayElements.scrollWindow)(f),t(f.displayElements.html)(f),f.updateTaBindtaTextElement=f["updateTaBindtaTextElement"+$],f.updateTaBindtaHtmlElement=f["updateTaBindtaHtmlElement"+$],p.addClass("ta-root"),f.displayElements.scrollWindow.addClass("ta-text ta-editor "+f.classes.textEditor),f.displayElements.html.addClass("ta-html ta-editor "+f.classes.htmlEditor);var O=function(e,t){t!==s[0].queryCommandState(e)&&s[0].execCommand(e,!1,null)};f._actionRunning=!1;var k=!1;if(f.startAction=function(){var t=!1,n=!1,r=!1,o=!1;return f._actionRunning=!0,t=s[0].queryCommandState("bold"),n=s[0].queryCommandState("italic"),r=s[0].queryCommandState("underline"),o=s[0].queryCommandState("strikeThrough"),k=e.saveSelection(),O("bold",t),O("italic",n),O("underline",r),O("strikeThrough",o),function(){k&&e.restoreSelection(k)}},f.endAction=function(){f._actionRunning=!1,k&&(f.showHtml?f.displayElements.html[0].focus():f.displayElements.text[0].focus(),e.removeMarkers(k)),k=!1,f.updateSelectedStyles(),f.showHtml||f["updateTaBindtaTextElement"+$]()},E=function(e){f.focussed=!0,p.addClass(f.classes.focussed),C.focus(),p.triggerHandler("focus"),f.updateSelectedStyles&&!f._bUpdateSelectedStyles&&n(function(){f.updateSelectedStyles()},0)},f.displayElements.html.on("focus",E),f.displayElements.text.on("focus",E),w=function(e){return f._actionRunning||s[0].activeElement===f.displayElements.html[0]||s[0].activeElement===f.displayElements.text[0]||(p.removeClass(f.classes.focussed),C.unfocus(),n(function(){f._bUpdateSelectedStyles=!1,p.triggerHandler("blur"),f.focussed=!1},0)),e.preventDefault(),!1},f.displayElements.html.on("blur",w),f.displayElements.text.on("blur",w),f.displayElements.text.on("paste",function(e){p.triggerHandler("paste",e)}),f.queryFormatBlockState=function(e){return!f.showHtml&&e.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},f.queryCommandState=function(e){return f.showHtml?"":s[0].queryCommandState(e)},f.switchView=function(){f.showHtml=!f.showHtml,l.enabled(!1,f.displayElements.html),l.enabled(!1,f.displayElements.text),f.showHtml?n(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.html[0].focus()},100):n(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.text[0].focus()},100)},h.ngModel){var L=!0;g.$render=function(){if(L){L=!1;var e=f.$parent.$eval(h.ngModel);void 0!==e&&null!==e||!S||""===S||g.$setViewValue(S)}f.displayElements.forminput.val(g.$viewValue),f.html=g.$viewValue||""},p.attr("required")&&(g.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})}else f.displayElements.forminput.val(S),f.html=S;if(f.$watch("html",function(e,t){e!==t&&(h.ngModel&&g.$viewValue!==e&&g.$setViewValue(e),f.displayElements.forminput.val(e))}),h.taTargetToolbars)C=i.registerEditor(f._name,f,h.taTargetToolbars.split(","));else{var _=angular.element('<div text-angular-toolbar name="textAngularToolbar'+$+'">');h.taToolbar&&_.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&_.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&_.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&_.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&_.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&_.attr("ta-focussed-class",h.taFocussedClass),p.prepend(_),t(_)(f.$parent),C=i.registerEditor(f._name,f,["textAngularToolbar"+$])}f.$on("$destroy",function(){i.unregisterEditor(f._name),angular.element(window).off("blur"),angular.element(window).off("resize",f.handlePopoverEvents),angular.element(window).off("scroll",f.handlePopoverEvents)}),f.$on("ta-element-select",function(e,t){C.triggerElementSelect(e,t)&&f["reApplyOnSelectorHandlerstaTextElement"+$]()}),f.$on("ta-drop-event",function(e,t,r,a){a&&a.files&&a.files.length>0?(f.displayElements.text[0].focus(),o.setSelectionToElementEnd(r.target),angular.forEach(a.files,function(e){try{u.when(f.fileDropHandler(e,f.wrapSelection)||f.fileDropHandler!==f.defaultFileDropHandler&&u.when(f.defaultFileDropHandler(e,f.wrapSelection))).then(function(){f["updateTaBindtaTextElement"+$]()})}catch(e){c.error(e)}}),r.preventDefault(),r.stopPropagation()):n(function(){f["updateTaBindtaTextElement"+$]()},0)}),f._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){f._bUpdateSelectedStyles=!1,f.focussed=!1}),f.updateSelectedStyles=function(){var e;N&&n.cancel(N),void 0!==(e=o.getSelectionElement())&&e.parentNode!==f.displayElements.text[0]?C.updateSelectedStyles(angular.element(e)):C.updateSelectedStyles(),f._bUpdateSelectedStyles&&(N=n(f.updateSelectedStyles,200))},m=function(){if(!f.focussed)return void(f._bUpdateSelectedStyles=!1);f._bUpdateSelectedStyles||(f._bUpdateSelectedStyles=!0,f.$apply(function(){f.updateSelectedStyles()}))},f.displayElements.html.on("keydown",m),f.displayElements.text.on("keydown",m),v=function(){f._bUpdateSelectedStyles=!1},f.displayElements.html.on("keyup",v),f.displayElements.text.on("keyup",v),y=function(e,t){if(o.getSelection){var n=o.getSelection();o.getSelectionElement()&&"a"===o.getSelectionElement().nodeName.toLowerCase()&&(3===n.start.element.nodeType&&n.start.element.textContent.length===n.end.offset&&o.setSelectionAfterElement(o.getSelectionElement()),3===n.start.element.nodeType&&0===n.start.offset&&o.setSelectionBeforeElement(o.getSelectionElement()))}t&&angular.extend(e,t),f.$apply(function(){if(C.sendKeyCommand(e))return f._bUpdateSelectedStyles||f.updateSelectedStyles(),e.preventDefault(),!1})},f.displayElements.html.on("keypress",y),f.displayElements.text.on("keypress",y),b=function(){f._bUpdateSelectedStyles=!1,n(function(){f.updateSelectedStyles()},0)},f.displayElements.html.on("mouseup",b),f.displayElements.text.on("mouseup",b)}}}]),y.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool","$interval","$rootScope","$log",function(e,t,n,r,o,a){var i,s={},l={},c=0,u=function(e){angular.forEach(l,function(t){t.editorFunctions.updateSelectedStyles(e)})},d=function(){c=Date.now(),i=r(function(){u(),i=void 0},50,1)};o.$on("destroy",function(){i&&(r.cancel(i),i=void 0)});var f=function(){Math.abs(Date.now()-c)>50&&d()};return{registerEditor:function(n,r,o){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!r)throw"textAngular Error: An editor requires a scope";if(l[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';return l[n]={scope:r,toolbars:o,toolbarScopes:[],_registerToolbarScope:function(e){this.toolbars.indexOf(e.name)>=0&&this.toolbarScopes.push(e)},editorFunctions:{disable:function(){angular.forEach(l[n].toolbarScopes,function(e){e.disabled=!0})},enable:function(){angular.forEach(l[n].toolbarScopes,function(e){e.disabled=!1})},focus:function(){angular.forEach(l[n].toolbarScopes,function(e){e._parent=r,e.disabled=!1,e.focussed=!0}),r.focussed=!0},unfocus:function(){angular.forEach(l[n].toolbarScopes,function(e){e.disabled=!0,e.focussed=!1}),r.focussed=!1},updateSelectedStyles:function(e){angular.forEach(l[n].toolbarScopes,function(t){angular.forEach(t.tools,function(n){n.activeState&&(t._parent=r,n.active=n.activeState(e))})})},sendKeyCommand:function(o){var a=!1;return(o.ctrlKey||o.metaKey||o.specialKey)&&angular.forEach(t,function(t,i){if(t.commandKeyCode&&(t.commandKeyCode===o.which||t.commandKeyCode===o.specialKey))for(var s=0;s<l[n].toolbarScopes.length;s++)if(void 0!==l[n].toolbarScopes[s].tools[i]){e.call(l[n].toolbarScopes[s].tools[i],r),a=!0;break}}),a},triggerElementSelect:function(e,o){var a=function(e,t){for(var n=!0,r=0;r<t.length;r++)n=n&&e.attr(t[r]);return n},i=[],s={},c=!1;o=angular.element(o);var u=!1;if(angular.forEach(t,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===o[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(o))&&(u=u||angular.isArray(e.onElementSelect.onlyWithAttrs)&&a(o,e.onElementSelect.onlyWithAttrs),e.onElementSelect.onlyWithAttrs&&!a(o,e.onElementSelect.onlyWithAttrs)||(s[t]=e))}),u?(angular.forEach(s,function(e,t){e.onElementSelect.onlyWithAttrs&&a(o,e.onElementSelect.onlyWithAttrs)&&i.push({name:t,tool:e})}),i.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(s,function(e,t){i.push({name:t,tool:e})}),i.length>0)for(var d=0;d<i.length;d++){for(var f=i[d].tool,p=i[d].name,h=0;h<l[n].toolbarScopes.length;h++)if(void 0!==l[n].toolbarScopes[h].tools[p]){f.onElementSelect.action.call(l[n].toolbarScopes[h].tools[p],e,o,r),c=!0;break}if(c)break}return c}}},angular.forEach(o,function(e){s[e]&&l[n].toolbarScopes.push(s[e])}),f(),l[n].editorFunctions},retrieveEditor:function(e){return l[e]},unregisterEditor:function(e){delete l[e],f()},registerToolbar:function(e){if(!e)throw"textAngular Error: A toolbar requires a scope";if(!e.name||""===e.name)throw"textAngular Error: A toolbar requires a name";if(s[e.name])throw'textAngular Error: A toolbar with name "'+e.name+'" already exists';s[e.name]=e,angular.forEach(l,function(t){t._registerToolbarScope(e)}),f()},retrieveToolbar:function(e){return s[e]},retrieveToolbarsViaEditor:function(e){var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete s[e],f()},updateToolsDisplay:function(e){var t=this;angular.forEach(e,function(e,n){t.updateToolDisplay(n,e)})},resetToolsDisplay:function(){var e=this;angular.forEach(t,function(t,n){e.resetToolDisplay(n)}),f()},updateToolDisplay:function(e,t){var n=this;angular.forEach(s,function(r,o){n.updateToolbarToolDisplay(o,e,t)}),f()},resetToolDisplay:function(e){var t=this;angular.forEach(s,function(n,r){t.resetToolbarToolDisplay(r,e)}),f()},updateToolbarToolDisplay:function(e,t,n){if(!s[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';s[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,n){if(!s[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';s[e].updateToolDisplay(n,t[n],!0)},removeTool:function(e){delete t[e],angular.forEach(s,function(t){delete t.tools[e];for(var n=0;n<t.toolbar.length;n++){for(var r,o=0;o<t.toolbar[n].length;o++){if(t.toolbar[n][o]===e){r={group:n,index:o};break}if(void 0!==r)break}void 0!==r&&(t.toolbar[r.group].slice(r.index,1),t._$element.children().eq(r.group).children().eq(r.index).remove())}}),f()},addTool:function(e,t,r,o){n(e,t),angular.forEach(s,function(n){n.addTool(e,t,r,o)}),f()},addToolToToolbar:function(e,t,r,o,a){n(e,t),s[r].addTool(e,t,o,a),f()},refreshEditor:function(e){if(!l[e])throw'textAngular Error: No Editor with name "'+e+'" exists';l[e].scope.updateTaBindtaTextElement(),l[e].scope.$$phase||l[e].scope.$digest(),f()},sendKeyCommand:function(e,t){var n=l[e._name];if(n&&n.editorFunctions.sendKeyCommand(t))return e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1},updateStyles:u,getVersion:function(){return"v1.5.16"},getToolbarScopes:function(){var e=[];return angular.forEach(l,function(t){e=e.concat(t.toolbarScopes)}),e}}}]),y.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(e,t,n,r,o,a){return{scope:{name:"@"},restrict:"EA",link:function(i,s,l){if(!i.name||""===i.name)throw"textAngular Error: A toolbar requires a name";angular.extend(i,angular.copy(n)),l.taToolbar&&(i.toolbar=i.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(i.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(i.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(i.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(i.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(i.classes.focussed=l.taFocussedClass),i.disabled=!0,i.focussed=!1,i._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+i.classes.toolbar),i.$watch("focussed",function(){i.focussed?s.addClass(i.classes.focussed):s.removeClass(i.classes.focussed)});var c=function(t,n){var r;if(r=t&&t.display?angular.element(t.display):angular.element("<button type='button'>"),t&&t.class?r.addClass(t.class):r.addClass(i.classes.toolbarButton),r.attr("name",n.name),r.attr("ta-button","ta-button"),r.attr("ng-disabled","isDisabled()"),r.attr("tabindex","-1"),r.attr("ng-click","executeAction()"),r.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&r.attr("title",t.tooltiptext),t&&!t.display&&!n._display&&(r[0].innerHTML="",t.buttontext&&(r[0].innerHTML=t.buttontext),t.iconclass)){var o=angular.element("<i>"),a=r[0].innerHTML;o.addClass(t.iconclass),r[0].innerHTML="",r.append(o),a&&""!==a&&r.append("&nbsp;"+a)}return n._lastToolDefinition=angular.copy(t),e(r)(n)};i.tools={},i._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var u={$window:a,$editor:function(){return i._parent},isDisabled:function(){return("html"!==this.name||!i._parent.startAction)&&("function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled)},displayActiveToolClass:function(e){return e?i.classes.toolbarButtonActive:""},executeAction:o};angular.forEach(i.toolbar,function(e){var t=angular.element("<div>");t.addClass(i.classes.toolbarGroup),angular.forEach(e,function(e){i.tools[e]=angular.extend(i.$new(!0),r[e],u,{name:e}),i.tools[e].$element=c(r[e],i.tools[e]),t.append(i.tools[e].$element)}),s.append(t)}),i.updateToolDisplay=function(e,t,n){var r=i.tools[e];if(r){if(r._lastToolDefinition&&!n&&(t=angular.extend({},r._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display;var o=c(t,r);r.$element.replaceWith(o),r.$element=o}},i.addTool=function(e,t,n,o){i.tools[e]=angular.extend(i.$new(!0),r[e],u,{name:e}),i.tools[e].$element=c(r[e],i.tools[e]);var a;void 0===n&&(n=i.toolbar.length-1),a=angular.element(s.children()[n]),void 0===o?(a.append(i.tools[e].$element),i.toolbar[n][i.toolbar[n].length-1]=e):(a.children().eq(o).after(i.tools[e].$element),i.toolbar[n][o]=e)},t.registerToolbar(i),i.$on("$destroy",function(){t.unregisterToolbar(i.name)})}}}]),y.directive("textAngularVersion",["textAngularManager",function(e){var t=e.getVersion();return{restrict:"EA",link:function(e,n,r){n.html(t)}}}]),y.name})},"FZ+f":function(e,t,n){(function(t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t){var a=r(o),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(i).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new t(JSON.stringify(e)).toString("base64")+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}}).call(t,n("EuP9").Buffer)},VUCL:function(e,t,n){var r,o,a;!function(i,s){o=[n("5Nri")],r=i,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=h.getDocument(e.startContainer),a=e.cloneRange();return a.collapse(t),n=o.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(o.createTextNode(v)),a.insertNode(n),n}function o(e,r,o,a){var i=n(o,e);i?(r[a?"setStartBefore":"setEndBefore"](i),g(i)):t.warn("Marker element has been removed. Cannot restore selection.")}function a(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function i(t,n){var o,a,i=e.DomRange.getRangeDocument(t),s=t.toString(),l=m(n);return t.collapsed?(a=r(t,!1),{document:i,markerId:a.id,collapsed:!0}):(a=r(t,!1),o=r(t,!0),{document:i,startMarkerId:o.id,endMarkerId:a.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function s(r,a){var i=r.document;void 0===a&&(a=!0);var s=e.createRange(i);if(r.collapsed){var l=n(r.markerId,i);if(l){l.style.display="inline";var c=l.previousSibling;c&&3==c.nodeType?(g(l),s.collapseToPoint(c,c.length)):(s.collapseBefore(l),g(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else o(i,s,r.startMarkerId,!0),o(i,s,r.endMarkerId,!1);return a&&s.normalizeBoundaries(),s}function l(t,r){var o,s,l=[],c=m(r);t=t.slice(0),t.sort(a);for(var u=0,d=t.length;u<d;++u)l[u]=i(t[u],c);for(u=d-1;u>=0;--u)o=t[u],s=e.DomRange.getRangeDocument(o),o.collapsed?o.collapseAfter(n(l[u].markerId,s)):(o.setEndBefore(n(l[u].endMarkerId,s)),o.setStartAfter(n(l[u].startMarkerId,s)));return l}function c(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),o=r.getAllRanges(),a=1==o.length&&r.isBackward(),i=l(o,a);return a?r.setSingleRange(o[0],a):r.setRanges(o),{win:n,rangeInfos:i,restored:!1}}function u(e){for(var t=[],n=e.length,r=n-1;r>=0;r--)t[r]=s(e[r],!0);return t}function d(t,n){if(!t.restored){var r=t.rangeInfos,o=e.getSelection(t.win),a=u(r);1==r.length&&n&&e.features.selectionHasExtend&&r[0].backward?(o.removeAllRanges(),o.addRange(a[0],!0)):o.setRanges(a),t.restored=!0}}function f(e,t){var r=n(t,e);r&&g(r)}function p(e){for(var t,n=e.rangeInfos,r=0,o=n.length;r<o;++r)t=n[r],t.collapsed?f(e.doc,t.markerId):(f(e.doc,t.startMarkerId),f(e.doc,t.endMarkerId))}var h=e.dom,g=h.removeNode,m=e.Selection.isDirectionBackward,v="\ufeff";e.util.extend(e,{saveRange:i,restoreRange:s,saveRanges:l,restoreRanges:u,saveSelection:c,restoreSelection:d,removeMarkerElement:f,removeMarkers:p})}),e})},baZp:function(e,t){!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,defaultCollapsed:!1,appendChildOnHover:!0})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,t){function n(e){if(!e)return 0;var t,r,o,a=0,i=e.childNodes();if(!i||0===i.length)return 0;for(o=i.length-1;o>=0;o--)t=i[o],r=1+n(t),a=Math.max(a,r);return a}this.scope=e,e.$element=t,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$allowNodeDrop=!1,e.collapsed=!1,e.expandOnHover=!1,e.init=function(n){var r=n[0];e.$treeScope=n[1]?n[1].scope:null,e.$parentNodeScope=r.scope.$nodeScope,e.$modelValue=r.scope.$modelValue[e.$index],e.$parentNodesScope=r.scope,r.scope.initSubNode(e),t.on("$destroy",function(){r.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(t){return e.$parentNodesScope==t.$parentNodesScope},e.isChild=function(t){var n=e.childNodes();return n&&n.indexOf(t)>-1},e.prev=function(){var t=e.index();return t>0?e.siblings()[t-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(t,n){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(t,n)},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed,e.$treeScope.$callbacks.toggle(e.collapsed,e)},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var t=e.$parentNodeScope;return t?t.depth()+1:1},e.maxSubDepth=function(){return e.$childNodesScope?n(e.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(t){if(!t.$modelValue)return null;e.$nodesMap[t.$modelValue.$$hashKey]=t},e.destroySubNode=function(t){if(!t.$modelValue)return null;e.$nodesMap[t.$modelValue.$$hashKey]=null},e.accept=function(t,n){return e.$treeScope.$callbacks.accept(t,e,n)},e.beforeDrag=function(t){return e.$treeScope.$callbacks.beforeDrag(t)},e.isParent=function(t){return t.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(t){var n=e.$modelValue.indexOf(t.$modelValue);return n>-1?(e.safeApply(function(){e.$modelValue.splice(n,1)[0]}),e.$treeScope.$callbacks.removed(t)):null},e.insertNode=function(t,n){e.safeApply(function(){e.$modelValue.splice(t,0,n)})},e.childNodes=function(){var t,n=[];if(e.$modelValue)for(t=0;t<e.$modelValue.length;t++)n.push(e.$nodesMap[e.$modelValue[t].$$hashKey]);return n},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(t){var n=e.maxDepth||e.$treeScope.maxDepth;return n>0&&e.depth()+t.maxSubDepth()+1>n}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(t){e.$nodesScope.$element.append(t),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():t.append(e.$emptyElm)},e.resetEmptyElement=this.resetEmptyElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,t){return{restrict:"A",scope:!0,controller:"TreeController",link:function(n,r,o,a){var i,s,l,c={accept:null,beforeDrag:null},u={};angular.extend(u,e),u.treeClass&&r.addClass(u.treeClass),"table"===r.prop("tagName").toLowerCase()?(n.$emptyElm=angular.element(t.document.createElement("tr")),s=r.find("tr"),l=s.length>0?angular.element(s).children().length:1e6,i=angular.element(t.document.createElement("td")).attr("colspan",l),n.$emptyElm.append(i)):n.$emptyElm=angular.element(t.document.createElement("div")),u.emptyTreeClass&&n.$emptyElm.addClass(u.emptyTreeClass),n.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&a.resetEmptyElement()},!0),n.$watch(o.dragEnabled,function(e){"boolean"==typeof e&&(n.dragEnabled=e)}),n.$watch(o.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(n.emptyPlaceholderEnabled=e,a.resetEmptyElement())}),n.$watch(o.nodropEnabled,function(e){"boolean"==typeof e&&(n.nodropEnabled=e)}),n.$watch(o.cloneEnabled,function(e){"boolean"==typeof e&&(n.cloneEnabled=e)}),n.$watch(o.maxDepth,function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(o.dragDelay,function(e){"number"==typeof e&&(n.dragDelay=e)}),c.accept=function(e,t,n){return!(t.nodropEnabled||t.$treeScope.nodropEnabled||t.outOfDepth(e))},c.beforeDrag=function(e){return!0},c.expandTimeoutStart=function(){},c.expandTimeoutCancel=function(){},c.expandTimeoutEnd=function(){},c.removed=function(e){},c.dropped=function(e){},c.dragStart=function(e){},c.dragMove=function(e){},c.dragStop=function(e){},c.beforeDrop=function(e){},c.toggle=function(e,t){},n.$watch(o.uiTree,function(e,t){angular.forEach(e,function(e,t){c[t]&&"function"==typeof e&&(c[t]=e)}),n.$callbacks=c},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(t,n,r,o){var a={};angular.extend(a,e),a.handleClass&&n.addClass(a.handleClass),t!=o.scope&&(t.$nodeScope=o.scope,o.scope.$handleScope=t)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(e,t,n,r,o,a){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(i,s,l,c){var u,d,f,p,h,g,m,v,y,b,E,w,S,C,x,T,N,R,$,A,D,O,k,L,_,M,H,B={},P="ontouchstart"in window,I=null,U=document.body,W=document.documentElement;angular.extend(B,e),B.nodeClass&&s.addClass(B.nodeClass),i.init(c),i.collapsed=!!t.getNodeAttribute(i,"collapsed")||e.defaultCollapsed,i.expandOnHover=!!t.getNodeAttribute(i,"expandOnHover"),i.scrollContainer=t.getNodeAttribute(i,"scrollContainer")||l.scrollContainer||null,i.sourceOnly=i.nodropEnabled||i.$treeScope.nodropEnabled,i.$watch(l.collapsed,function(e){"boolean"==typeof e&&(i.collapsed=e)}),i.$watch("collapsed",function(e){t.setNodeAttribute(i,"collapsed",e),l.$set("collapsed",e)}),i.$watch(l.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(i.expandOnHover=e)}),i.$watch("expandOnHover",function(e){t.setNodeAttribute(i,"expandOnHover",e),l.$set("expandOnHover",e)}),l.$observe("scrollContainer",function(e){"string"==typeof e&&(i.scrollContainer=e)}),i.$watch("scrollContainer",function(e){t.setNodeAttribute(i,"scrollContainer",e),l.$set("scrollContainer",e),m=document.querySelector(e)}),i.$on("angular-ui-tree:collapse-all",function(){i.collapsed=!0}),i.$on("angular-ui-tree:expand-all",function(){i.collapsed=!1}),w=function(e){if((P||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var o,a,l,c,m,v,w,S,C,x=angular.element(e.target);if(o=t.treeNodeHandlerContainerOfElement(x),o&&(x=angular.element(o)),a=s.clone(),S=t.elementIsTreeNode(x),C=t.elementIsTreeNodeHandle(x),(S||C)&&!(S&&t.elementContainsTreeNodeHandler(x)||"input"==(l=x.prop("tagName").toLowerCase())||"textarea"==l||"button"==l||"select"==l)){for(_=angular.element(e.target),M=_[0].attributes["ui-tree"];_&&_[0]&&_[0]!==s&&!M;){if(_[0].attributes&&(M=_[0].attributes["ui-tree"]),t.nodrag(_))return;_=_.parent()}i.beforeDrag(i)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),m=t.eventObj(e),u=!0,d=t.dragInfo(i),H=d.source.$treeScope.$id,c=s.prop("tagName"),"tr"===c.toLowerCase()?(p=angular.element(n.document.createElement(c)),v=angular.element(n.document.createElement("td")).addClass(B.placeholderClass).attr("colspan",s[0].children.length),p.append(v)):p=angular.element(n.document.createElement(c)).addClass(B.placeholderClass),h=angular.element(n.document.createElement(c)),B.hiddenClass&&h.addClass(B.hiddenClass),f=t.positionStarted(m,s),p.css("height",s.prop("offsetHeight")+"px"),g=angular.element(n.document.createElement(i.$parentNodesScope.$element.prop("tagName"))).addClass(i.$parentNodesScope.$element.attr("class")).addClass(B.dragClass),g.css("width",t.width(s)+"px"),g.css("z-index",9999),w=(s[0].querySelector(".angular-ui-tree-handle")||s[0]).currentStyle,w&&(document.body.setAttribute("ui-tree-cursor",r.find("body").css("cursor")||""),r.find("body").css({cursor:w.cursor+"!important"})),i.sourceOnly&&p.css("display","none"),s.after(p),s.after(h),d.isClone()&&i.sourceOnly?g.append(a):g.append(s),r.find("body").append(g),g.css({left:m.pageX-f.offsetX+"px",top:m.pageY-f.offsetY+"px"}),y={placeholder:p,dragging:g},D(),i.$apply(function(){i.$treeScope.$callbacks.dragStart(d.eventArgs(y,f))}),b=Math.max(U.scrollHeight,U.offsetHeight,W.clientHeight,W.scrollHeight,W.offsetHeight),E=Math.max(U.scrollWidth,U.offsetWidth,W.clientWidth,W.scrollWidth,W.offsetWidth))}}},S=function(e){var r,a,s,l,c,h,w,S,C,x,T,N,R,$,A,D,O,k,_,M,P,U=t.eventObj(e);if(g){if(e.preventDefault(),n.getSelection?n.getSelection().removeAllRanges():n.document.selection&&n.document.selection.empty(),a=U.pageX-f.offsetX,s=U.pageY-f.offsetY,a<0&&(a=0),s<0&&(s=0),s+10>b&&(s=b-10),a+10>E&&(a=E-10),g.css({left:a+"px",top:s+"px"}),m?(h=m.getBoundingClientRect(),l=m.scrollTop,c=l+m.clientHeight,h.bottom<U.clientY&&c<m.scrollHeight&&($=Math.min(m.scrollHeight-c,10),m.scrollTop+=$),h.top>U.clientY&&l>0&&(A=Math.min(l,10),m.scrollTop-=A)):(l=window.pageYOffset||n.document.documentElement.scrollTop,c=l+(window.innerHeight||n.document.clientHeight||n.document.clientHeight),c<U.pageY&&c<b&&($=Math.min(b-c,10),window.scrollBy(0,$)),l>U.pageY&&(A=Math.min(l,10),window.scrollBy(0,-A))),t.positionMoved(e,f,u),u)return void(u=!1);if(S=U.pageX-(n.pageXOffset||n.document.body.scrollLeft||n.document.documentElement.scrollLeft)-(n.document.documentElement.clientLeft||0),C=U.pageY-(n.pageYOffset||n.document.body.scrollTop||n.document.documentElement.scrollTop)-(n.document.documentElement.clientTop||0),angular.isFunction(g.hide)?g.hide():(x=g[0].style.display,g[0].style.display="none"),n.document.elementFromPoint(S,C),N=angular.element(n.document.elementFromPoint(S,C)),L=t.treeNodeHandlerContainerOfElement(N),L&&(N=angular.element(L)),angular.isFunction(g.show)?g.show():g[0].style.display=x,t.elementIsTree(N)?T=N.controller("uiTree").scope:t.elementIsTreeNodeHandle(N)?T=N.controller("uiTreeHandle").scope:t.elementIsTreeNode(N)?T=N.controller("uiTreeNode").scope:t.elementIsTreeNodes(N)?T=N.controller("uiTreeNodes").scope:t.elementIsPlaceholder(N)?T=N.controller("uiTreeNodes").scope:N.controller("uiTreeNode")&&(T=N.controller("uiTreeNode").scope),T&&T.$treeScope&&T.$treeScope.$id&&T.$treeScope.$id===H&&f.dirAx)f.distX>0&&(r=d.prev())&&!r.collapsed&&r.accept(i,r.childNodesCount())&&(r.$childNodesScope.$element.append(p),d.moveTo(r.$childNodesScope,r.childNodes(),r.childNodesCount())),f.distX<0&&(d.next()||(w=d.parentNode())&&w.$parentNodesScope.accept(i,w.index()+1)&&(w.$element.after(p),d.moveTo(w.$parentNodesScope,w.siblings(),w.index()+1)));else{if(R=!1,!T)return;if(!T.$treeScope||T.$parent.nodropEnabled||T.$treeScope.nodropEnabled||p.css("display",""),"uiTree"===T.$type&&T.dragEnabled&&(R=T.isEmpty()),"uiTreeHandle"===T.$type&&(T=T.$nodeScope),"uiTreeNode"!==T.$type&&!R)return void(B.appendChildOnHover&&!d.next()&&v&&(w=d.parentNode(),w.$element.after(p),d.moveTo(w.$parentNodesScope,w.siblings(),w.index()+1),v=!1));I&&p.parent()[0]!=I.$element[0]&&(I.resetEmptyElement(),I=null),R?(I=T,T.$nodesScope.accept(i,0)&&(T.place(p),d.moveTo(T.$nodesScope,T.$nodesScope.childNodes(),0))):T.dragEnabled()&&(angular.isDefined(i.expandTimeoutOn)&&i.expandTimeoutOn!==T.id&&(o.cancel(i.expandTimeout),delete i.expandTimeout,delete i.expandTimeoutOn,i.$callbacks.expandTimeoutCancel()),T.collapsed&&(i.expandOnHover===!0||angular.isNumber(i.expandOnHover)&&0===i.expandOnHover?(T.collapsed=!1,T.$treeScope.$callbacks.toggle(!1,T)):i.expandOnHover!==!1&&angular.isNumber(i.expandOnHover)&&i.expandOnHover>0&&angular.isUndefined(i.expandTimeoutOn)&&(i.expandTimeoutOn=T.$id,i.$callbacks.expandTimeoutStart(),i.expandTimeout=o(function(){i.$callbacks.expandTimeoutEnd(),T.collapsed=!1,T.$treeScope.$callbacks.toggle(!1,T)},i.expandOnHover))),N=T.$element,D=t.offset(N),_=t.height(N),M=T.$childNodesScope?T.$childNodesScope.$element:null,P=M?t.height(M):0,_-=P,k=B.appendChildOnHover?.25*_:t.height(N)/2,O=U.pageY<D.top+k,T.$parentNodesScope.accept(i,T.index())?O?(N[0].parentNode.insertBefore(p[0],N[0]),d.moveTo(T.$parentNodesScope,T.siblings(),T.index())):B.appendChildOnHover&&T.accept(i,T.childNodesCount())?(T.$childNodesScope.$element.prepend(p),d.moveTo(T.$childNodesScope,T.childNodes(),0),v=!0):(N.after(p),d.moveTo(T.$parentNodesScope,T.siblings(),T.index()+1)):!O&&T.accept(i,T.childNodesCount())&&(T.$childNodesScope.$element.append(p),d.moveTo(T.$childNodesScope,T.childNodes(),T.childNodesCount())))}i.$apply(function(){i.$treeScope.$callbacks.dragMove(d.eventArgs(y,f))})}},C=function(e){var t=d.eventArgs(y,f);e.preventDefault(),O(),o.cancel(i.expandTimeout),i.$treeScope.$apply(function(){a.when(i.$treeScope.$callbacks.beforeDrop(t)).then(function(e){e!==!1&&i.$$allowNodeDrop?(d.apply(),i.$treeScope.$callbacks.dropped(t)):A()}).catch(function(){A()}).finally(function(){h.replaceWith(i.$element),p.remove(),g&&(g.remove(),g=null),i.$treeScope.$callbacks.dragStop(t),i.$$allowNodeDrop=!1,d=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(r.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},x=function(e){i.dragEnabled()&&w(e)},T=function(e){S(e)},N=function(e){i.$$allowNodeDrop=!0,C(e)},R=function(e){C(e)},$=function(){var e;return{exec:function(t,n){n||(n=0),this.cancel(),e=o(t,n)},cancel:function(){o.cancel(e)}}}(),k=function(e){27===e.keyCode&&N(e)},A=function(){s.bind("touchstart mousedown",function(e){i.dragDelay>0?$.exec(function(){x(e)},i.dragDelay):x(e)}),s.bind("touchend touchcancel mouseup",function(){i.dragDelay>0&&$.cancel()})},A(),D=function(){angular.element(r).bind("touchend",N),angular.element(r).bind("touchcancel",N),angular.element(r).bind("touchmove",T),angular.element(r).bind("mouseup",N),angular.element(r).bind("mousemove",T),angular.element(r).bind("mouseleave",R),angular.element(r).bind("keydown",k)},O=function(){angular.element(r).unbind("touchend",N),angular.element(r).unbind("touchcancel",N),angular.element(r).unbind("touchmove",T),angular.element(r).unbind("mouseup",N),angular.element(r).unbind("mousemove",T),angular.element(r).unbind("mouseleave",R),angular.element(r).unbind("keydown",k)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,n,r,o){var a={},i=o[0],s=o[1],l=o[2];angular.extend(a,e),a.nodesClass&&n.addClass(a.nodesClass),s?(s.scope.$childNodesScope=t,t.$nodeScope=s.scope):l.scope.$nodesScope=t,t.$treeScope=l.scope,i&&(i.$render=function(){t.$modelValue=i.$modelValue}),t.$watch(function(){return r.maxDepth},function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(function(){return r.nodropEnabled},function(e){void 0!==e&&(t.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";function e(e,t){if(void 0===t)return null;for(var n=t.parentNode,r=1,o="function"==typeof n.setAttribute&&n.hasAttribute(e)?n:null;n&&"function"==typeof n.setAttribute&&!n.hasAttribute(e);){if(n=n.parentNode,o=n,n===document.documentElement){o=null;break}r++}return o}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(t,n,r){return{nodesData:{},setNodeAttribute:function(e,t,n){if(!e.$modelValue)return null;var r=this.nodesData[e.$modelValue.$$hashKey];r||(r={},this.nodesData[e.$modelValue.$$hashKey]=r),r[t]=n},getNodeAttribute:function(e,t){if(!e.$modelValue)return null;var n=this.nodesData[e.$modelValue.$$hashKey];return n?n[t]:null},nodrag:function(e){return void 0!==e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,t,n){this.parent=e,this.siblings=t.slice(0);var r=this.siblings.indexOf(this.source);r>-1&&(this.siblings.splice(r,1),this.source.index()<n&&n--),this.siblings.splice(n,0,this.source),this.index=n},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:t}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var r=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:r.top+(n.pageYOffset||t[0].body.scrollTop||t[0].documentElement.scrollTop),left:r.left+(n.pageXOffset||t[0].body.scrollLeft||t[0].documentElement.scrollLeft)}},positionStarted:function(e,t){var n={},r=e.pageX,o=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(r=e.originalEvent.touches[0].pageX,o=e.originalEvent.touches[0].pageY),n.offsetX=r-this.offset(t).left,n.offsetY=o-this.offset(t).top,n.startX=n.lastX=r,n.startY=n.lastY=o,n.nowX=n.nowY=n.distX=n.distY=n.dirAx=0,n.dirX=n.dirY=n.lastDirX=n.lastDirY=n.distAxX=n.distAxY=0,n},positionMoved:function(e,t,n){var r,o=e.pageX,a=e.pageY;if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(o=e.originalEvent.touches[0].pageX,a=e.originalEvent.touches[0].pageY),t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=o,t.nowY=a,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=0===t.distX?0:t.distX>0?1:-1,t.dirY=0===t.distY?0:t.distY>0?1:-1,r=Math.abs(t.distX)>Math.abs(t.distY)?1:0,n)return t.dirAx=r,void(t.moving=!0);t.dirAx!==r?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),0!==t.dirX&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),0!==t.dirY&&t.dirY!==t.lastDirY&&(t.distAxY=0)),t.dirAx=r},elementIsTreeNode:function(e){return void 0!==e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return void 0!==e.attr("ui-tree-handle")},elementIsTree:function(e){return void 0!==e.attr("ui-tree")},elementIsTreeNodes:function(e){return void 0!==e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(r.placeholderClass)},elementContainsTreeNodeHandler:function(e){return e[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(t){return e("ui-tree-handle",t[0])}}}])}()},fjbf:function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=h[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(u(r.parts[a],t))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(u(r.parts[a],t));h[r.id]={id:r.id,refs:1,parts:i}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],a=o[0],i=o[1],s=o[2],l=o[3],c={css:i,media:s,sourceMap:l};n[a]?n[a].parts.push(c):t.push(n[a]={id:a,parts:[c]})}return t}function a(e,t){var n=m(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function i(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),a(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),a(e,t),t}function c(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,r,o;if(t.singleton){var a=y++;n=v||(v=s(t)),r=d.bind(null,n,a,!1),o=d.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=p.bind(null,n,t),o=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),o=function(){i(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function d(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=E(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}var h={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),m=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),v=null,y=0,b=[],E=n("quY5");e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=g()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var s=n[i],l=h[s.id];l.refs--,a.push(l)}e&&r(o(e),t);for(var i=0;i<a.length;i++){var l=a[i];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete h[l.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},mcSx:function(e,t){!function(e,t,n){"use strict";function r(){this.$get=["$$sanitizeUri",function(e){return function(t){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var n=[];return i(t,d(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function o(e){var n=[];return d(n,t.noop).chars(e),n.join("")}function a(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function i(e,n){function r(e,r,a,i){if(r=t.lowercase(r),A[r])for(;u.last()&&D[u.last()];)o("",u.last());$[r]&&u.last()==r&&o("",r),(i=T[r]||!!i)||u.push(r);var l={};a.replace(g,function(e,t,n,r,o){var a=n||r||o||"";l[t]=s(a)}),n.start&&n.start(r,l,i)}function o(e,r){var o,a=0;if(r=t.lowercase(r))for(a=u.length-1;a>=0&&u[a]!=r;a--);if(a>=0){for(o=u.length-1;o>=a;o--)n.end&&n.end(u[o]);u.length=a}}"string"!=typeof e&&(e=null===e||void 0===e?"":""+e);var a,i,l,c,u=[],d=e;for(u.last=function(){return u[u.length-1]};e;){if(c="",i=!0,u.last()&&k[u.last()]?(e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+u.last()+"[^>]*>","i"),function(e,t){return t=t.replace(y,"$1").replace(w,"$1"),n.chars&&n.chars(s(t)),""}),o("",u.last())):(x.test(e)?(l=e.match(x))&&(l[0],n.whitespace&&n.whitespace(l[0]),e=e.replace(l[0],""),i=!1):b.test(e)?(l=e.match(b))&&(n.comment&&n.comment(l[1]),e=e.replace(l[0],""),i=!1):E.test(e)?(l=e.match(E))&&(e=e.replace(l[0],""),i=!1):v.test(e)?(l=e.match(h))&&(e=e.substring(l[0].length),l[0].replace(h,o),i=!1):m.test(e)&&(l=e.match(p),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(p,r)),i=!1):(c+="<",e=e.substring(1))),i&&(a=e.indexOf("<"),c+=a<0?e:e.substring(0,a),e=a<0?"":e.substring(a),n.chars&&n.chars(s(c)))),e==d)throw f("badparse","The sanitizer was unable to parse the following block of html: {0}",e);d=e}o()}function s(e){if(!e)return"";var t=I.exec(e),n=t[1],r=t[3],o=t[2];return o&&(P.innerHTML=o.replace(/</g,"&lt;"),o="textContent"in P?P.textContent:P.innerText),n+o+r}function l(e){return e.replace(/&/g,"&amp;").replace(S,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(C,function(e){var t=e.charCodeAt(0);return t<=159||173==t||t>=1536&&t<=1540||1807==t||6068==t||6069==t||t>=8204&&t<=8207||t>=8232&&t<=8239||t>=8288&&t<=8303||65279==t||t>=65520&&t<=65535?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(e){var n="",r=e.split(";");return t.forEach(r,function(e){var r=e.split(":");if(2==r.length){var o=U(t.lowercase(r[0])),e=U(t.lowercase(r[1]));(("color"===o||"background-color"===o)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===o&&("left"===e||"right"===e||"center"===e||"justify"===e)||"text-decoration"===o&&("underline"===e||"line-through"===e)||"font-weight"===o&&"bold"===e||"font-style"===o&&"italic"===e||"float"===o&&("left"===e||"right"===e||"none"===e)||"vertical-align"===o&&("baseline"===e||"sub"===e||"super"===e||"test-top"===e||"text-bottom"===e||"middle"===e||"top"===e||"bottom"===e||e.match(/[0-9]*(px|em)/)||e.match(/[0-9]+?%/))||"font-size"===o&&("xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"larger"===e||"smaller"===e||e.match(/[0-9]*\.?[0-9]*(px|em|rem|mm|q|cm|in|pt|pc|%)/))||("width"===o||"height"===o)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===o&&e.match(/^ltr|rtl|initial|inherit$/))&&(n+=o+": "+e+";")}}),n}function u(e,t,n,r){return!("img"!==e||!t["ta-insert-video"]||"ta-insert-video"!==n&&"allowfullscreen"!==n&&"frameborder"!==n&&("contenteditable"!==n||"false"!==r))}function d(e,n){var r=!1,o=t.bind(e,e.push);return{start:function(e,a,i){e=t.lowercase(e),!r&&k[e]&&(r=e),r||L[e]!==!0||(o("<"),o(e),t.forEach(a,function(r,i){var s=t.lowercase(i),d="img"===e&&"src"===s||"background"===s;("style"===s&&""!==(r=c(r))||u(e,a,s,r)||B[s]===!0&&(_[s]!==!0||n(r,d)))&&(o(" "),o(i),o('="'),o(l(r)),o('"'))}),o(i?"/>":">"))},comment:function(e){o(e)},whitespace:function(e){o(l(e))},end:function(e){e=t.lowercase(e),r||L[e]!==!0||(o("</"),o(e),o(">")),e==r&&(r=!1)},chars:function(e){r||o(l(e))}}}var f=t.$$minErr("$sanitize"),p=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,g=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,v=/^<\//,y=/<!--(.*?)-->/g,b=/(^<!--.*?-->)/,E=/<!DOCTYPE([^>]*?)>/i,w=/<!\[CDATA\[(.*?)]]>/g,S=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^\#-~| |!])/g,x=/^(\s+)/,T=a("area,br,col,hr,img,wbr,input"),N=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),R=a("rp,rt"),$=t.extend({},R,N),A=t.extend({},N,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),D=t.extend({},R,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),O=a("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),k=a("script,style"),L=t.extend({},T,A,D,$,O),_=a("background,cite,href,longdesc,src,usemap,xlink:href"),M=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),H=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),B=t.extend({},_,H,M),P=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/,U=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",r),t.module("ngSanitize").filter("linky",["$sanitize",function(e){return function(n,r){function a(e){e&&u.push(o(e))}if(!n)return n;for(var i,s,l,c=n,u=[];i=c.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/);)s=i[0],i[2]||i[4]||(s=(i[3]?"http://":"mailto:")+s),l=i.index,a(c.substr(0,l)),function(e,n){u.push("<a "),t.isDefined(r)&&u.push('target="',r,'" '),u.push('href="',e.replace(/"/g,"&quot;"),'">'),a(n),u.push("</a>")}(s,i[0].replace(/^mailto:/,"")),c=c.substring(l+i[0].length);return a(c),e(u.join(""))}}])}(window,window.angular)},quY5:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var a;return a=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},sOR5:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},ujcs:function(e,t){t.read=function(e,t,n,r,o){var a,i,s=8*o-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=f,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=f,u-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),a-=c}return(p?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,s,l,c=8*a-o-1,u=(1<<c)-1,d=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),t+=i+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*l-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(i=i<<o|s,c+=o;c>0;e[n+p]=255&i,p+=h,i/=256,c-=8);e[n+p-h]|=128*g}},wdTO:function(e,t,n){n("baZp"),e.exports="ui.tree"}});
//# sourceMappingURL=v4.10.93-dev-8.vendor.d2c46713045fd7cc06ff.min.js.map