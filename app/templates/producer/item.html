<div class="itemEdit authoringForm">


	<!-- begin producer -->
	<div class="ittTabs" itt-tabs>
		<!-- begin tabset -->


		<div class="ittTab" itt-tab="tabs[0]" x-tabindex="0" x-tablabel="{{item._type === 'Scene' ? 'Scene' : 'Item'}}">

			<select style="float:right; padding-right: 24px" ng-if="languages.length > 1" size="1" ng-model="appState.lang" ng-change="forcePreview()" ng-options="language.code as ('['+language.code.toUpperCase()+']') for language in languages">
			</select>

			<div form-field="Time">
				<!-- TODO call setItemTime and setItemEndTime or equivalent on these: -->
				<span sxs-input-time="item" x-input-field="start_time"></span>
				<span ng-if="!(item.stop || item._type === 'Scene')">
					<label>-
						<span sxs-input-time="item" x-input-field="end_time"></span>
					</label>
				</span>
				<br>
				<input type="checkbox" ng-model="item.stop">Pause playback when this enters
			</div>
			<itt-asset-form ng-model="item.asset_id"></itt-asset-form>

			<div ng-include="itemEditor"></div>

			<div form-field="Metadata">
				<label class="toggle">
					<input type="checkbox" ng-model="item.required"> Students are required to view this item.</label>
				<label class="toggle">
					<input type="checkbox" ng-model="item.cosmetic"> This is a cosmetic item.
					<div class="info">Cosmetic items do not appear in search results.</div>
				</label>
			</div>
		</div>

		<div class="ittTab" itt-tab="tabs[1]" x-tabindex="1" x-tablabel="Style">
			<div form-field="Template">
				<itt-chooser-form ng-if="item.tmpl.itemType=='transcript'" ng-model="item.tmpl.template" item="item" choices="[
					{name: 'Default', value: 'default'},
					{name: 'thumbnail', value: 'thumbnail',flippable:1},
					{name: 'Flourish', value: 'flourish'},
					{name: 'Background image', value: 'bgimage'},
					{name: 'Rearranged', value: 'rearranged'},
					{name: 'Quotation', value: 'quotation'},
					{name: 'DEBUG', value: 'debug'}
				]"></itt-chooser-form>
				<itt-chooser-form ng-if="item.tmpl.itemType=='annotation'" ng-model="item.tmpl.template" item="item" choices="[
					{name: 'Default', value: 'default'},
					{name: 'Pullquote (attributed)', value: 'pullquote'},
					{name: 'Pullquote (unattributed)', value: 'pullquote-noattrib'},
					{name: 'Header', value: 'h1'},
					{name: 'Sub-head', value: 'h2'},
					{name: 'DEBUG', value: 'debug'}
				]"></itt-chooser-form>

				<itt-chooser-form ng-if="item.tmpl.itemType=='link'" ng-model="item.tmpl.template" item="item" choices="[
					{name: 'Default', value: 'default'},
					{name: 'Card flip', value: 'cardflip'},
					{name: 'DEBUG', value: 'debug'}
				]"></itt-chooser-form>

			</div>


			<div form-field="Layout">
				<select ng-model="item.tmpl.layout">
					<option value="">As content</option>
					<option value="overlay">As overlay</option>
				</select>
			</div>


			<div ng-if="item.tmpl.layout === 'overlay'" form-field="Position">
				<itt-position-overlay style="float:left;width:50%;" ng-model="item.tmpl.position"></itt-position-overlay>
				TODO pane selection TODO size settings TODO opacity
			</div>


			<div ng-if="item.tmpl.layout !== 'overlay'" form-field="Position">
				<itt-position-content ng-model="item.tmpl.position"></itt-position-content>
			</div>


			<div form-field="Style">
				<select size="1" ng-model="item.tmpl.stylepreset">
					<option value="">Default style</option>
					<!--
					<optgroup label="Presets">
						<option value="x">Preset X
						</option>
					</optgroup>
					-->
					<optgroup label="My saved styles">
						<option ng-repeat="preset in stylePresets" value="{{preset.name}}">{{preset.name}}</option>
					</optgroup>
					<optgroup label="Custom styles">
						<option value="custom">New style</option>
					</optgroup>
				</select>
				<span ng-if="!showCustomStyles && item.tmpl.stylepreset">
					<button ng-click="editStyle()">Edit this style</button>
					<button ng-if="stylePresets[preset.name]" ng-click="deleteStylePreset()" style="background-color:#800; color:#FFF">Delete this style</button>
				</span>
			</div>

			<fieldset ng-if="showCustomStyles">
				<legend>Custom styles</legend>

				<div ng-if="item.tmpl.layout === 'overlay'" form-field="Border/Background">
					<itt-chooser-form ng-model="item.tmpl.wrapper" choices="[
						{name: 'Default', value: 'default'},
						{name: 'Edge to edge', value: 'bleed'},
						{name: 'Box', value: 'box'},
						{name: 'Inset', value: 'inset'},
						{name: 'Colored Border', value: 'coloredborder'},
					]"></itt-chooser-form>
				</div>

				<div ng-if="item.tmpl.layout !== 'overlay'" form-field="Border/Background">
					<itt-chooser-form ng-model="item.tmpl.wrapper" choices="[
						{name: 'Default', value: 'default'},
						{name: 'Box', value: 'box'},
						{name: 'Inset', value: 'inset'},
						{name: 'Colored Border', value: 'coloredborder'},
					]"></itt-chooser-form>
				</div>

				<!-- begin custom styles -->
				<div form-field="Timestamp">
					<itt-chooser-form ng-model="item.tmpl.timestamp" choices="[
					{name: 'Default', value: ''},
					{name: 'No timestamp', value: 'none'},
					{name: 'Rounded', value: 'rounded'},
					{name: 'Rounded white', value: 'roundedwhite'},
					{name: 'Corner', value: 'corner'}
				]"></itt-chooser-form>
				</div>


				<div form-field="Colors">
					<div itt-item-color-form="item"></div>
				</div>

				<div form-field="Primary font">
					<select size="1" ng-model="item.tmpl.style.font1.face" style="width:49%;display:inline-block">
						<option value="default">Default</option>
						<optgroup label="Sans Serif">
							<option value="droidsans">Droid Sans</option>
							<option value="helvetica">Helvetica</option>
							<option value="impact">Impact</option>
							<option value="lato">Lato</option>
							<option value="latothin">Lato Extra Light</option>
							<option value="myriad">Myriad</option>
							<option value="opensans">Open Sans</option>
							<option value="ptsans">PT Sans</option>
							<option value="roboto">Roboto</option>
							<option value="trebuchet">Trebuchet MS</option>
							<option value="verdana">Verdana</option>
						</optgroup>
						<optgroup label="Serif">
							<option value="arvo">Arvo</option>
							<option value="cardo">Cardo</option>
							<option value="droidserif">Droid Serif</option>
							<option value="garamond">Garamond</option>
							<option value="gentium">Gentium</option>
							<option value="merriweather">Merriweather</option>
							<option value="oldstandard">Old Standard</option>
							<option value="playfair">Playfair Display</option>
							<option value="ptserif">PT Serif</option>
							<option value="trajan">Trajan</option>
							<option value="vollkorn">Vollkorn</option>
						</optgroup>
						<optgroup label="Italic">
							<option value="droidital">Droid Italic</option>
							<option value="latoital">Lato Italic</option>
							<option value="merriweatherital">Merriweather Italic</option>
							<option value="ptsansital">PT Sans Italic</option>
							<option value="ptserifital">PT Serif Italic</option>
							<option value="vollkornital">Vollkorn Italic</option>
						</optgroup>
					</select>
					<div style="width:49%;display:inline-block">
						<div class="size">
							<input class="sizeSlider" type="range" min="75" max="150" ng-model="item.tmpl.style.font1.size">
							<span class="sizeSize" ng-if="item.tmpl.style.font1.size">
								<input ng-model="item.tmpl.style.font1.size">%
							</span>
							<span class="sizeReset" ng-if="item.tmpl.style.font1.size && item.tmpl.style.font1.size !== 100">
								<button ng-click="item.tmpl.style.font1.size=100" class="fa fa-lg fa-ban borderless"></button>
							</span>
						</div>
					</div>
				</div>

				<div form-field="Secondary font">
					<select size="1" ng-model="item.tmpl.style.font2.face" style="width:49%;display:inline-block">
						<option value="default">Default</option>
						<optgroup label="Sans Serif">
							<option value="droidsans">Droid Sans</option>
							<option value="helvetica">Helvetica</option>
							<option value="impact">Impact</option>
							<option value="lato">Lato</option>
							<option value="latothin">Lato Extra Light</option>
							<option value="myriad">Myriad</option>
							<option value="opensans">Open Sans</option>
							<option value="ptsans">PT Sans</option>
							<option value="roboto">Roboto</option>
							<option value="trebuchet">Trebuchet MS</option>
							<option value="verdana">Verdana</option>
						</optgroup>
						<optgroup label="Serif">
							<option value="arvo">Arvo</option>
							<option value="cardo">Cardo</option>
							<option value="droidserif">Droid Serif</option>
							<option value="garamond">Garamond</option>
							<option value="gentium">Gentium</option>
							<option value="merriweather">Merriweather</option>
							<option value="oldstandard">Old Standard</option>
							<option value="playfair">Playfair Display</option>
							<option value="ptserif">PT Serif</option>
							<option value="trajan">Trajan</option>
							<option value="vollkorn">Vollkorn</option>
						</optgroup>
						<optgroup label="Italic">
							<option value="droidital">Droid Italic</option>
							<option value="latoital">Lato Italic</option>
							<option value="merriweatherital">Merriweather Italic</option>
							<option value="ptsansital">PT Sans Italic</option>
							<option value="ptserifital">PT Serif Italic</option>
							<option value="vollkornital">Vollkorn Italic</option>
						</optgroup>
					</select>
					<div style="width:49%;display:inline-block">
						<div class="size">
							<input class="sizeSlider" type="range" min="75" max="150" ng-model="item.tmpl.style.font2.size">
							<span class="sizeSize" ng-if="item.tmpl.style.font2.size">
								<input ng-model="item.tmpl.style.font2.size">%
							</span>
							<span class="sizeReset" ng-if="item.tmpl.style.font2.size && item.tmpl.style.font2.size !== 100">
								<button ng-click="item.tmpl.style.font2.size=100" class="fa fa-lg fa-ban borderless"></button>
							</span>
						</div>
					</div>
				</div>

				<div form-field="Scale all text">
					<div class="size">
						<input class="sizeSlider" type="range" min="75" max="150" ng-model="item.tmpl.style.fontsize">
						<span class="sizeSize" ng-if="item.tmpl.style.fontsize">
							<input ng-model="item.tmpl.style.fontsize">%
						</span>
						<span class="sizeReset" ng-if="item.tmpl.style.fontsize && item.tmpl.style.fontsize !== 100">
							<button ng-click="item.tmpl.style.fontsize=100" class="fa fa-lg fa-ban borderless"></button>
						</span>
					</div>
				</div>


				<div form-field="Save Preset">
					You can save these style settings for later re-use:
					<br>
					<input type="text" ng-model="preset.name" style="width:auto">
					<button ng-click="saveStylePreset()">Save</button>
				</div>

				<!-- end of custom styles -->

			</fieldset>
		</div>
		<!-- end of tabset -->
	</div>

	<div class="ittTabFoot">
		<a ng-click="cancelEdit()">Cancel</a> &nbsp; &nbsp;
		<button ng-if="item._id != 'internal:editing'" ng-click="deleteEvent(item._id)">Delete</button>
		<button ng-click="saveEvent()">Save</button>
	</div>
</div>
