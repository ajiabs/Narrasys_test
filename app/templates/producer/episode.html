<div class="itemEdit authoringForm">
  <form name="ittEpisodeForm" class="doValidate">
    <div ng-if="appState.product == 'producer'">
      <!-- <span class="eventIcon icon-episode"></span> -->

      <div class="ittTabs" itt-tabs>

        <!-- begin tabset -->
        <div class="ittTab" itt-tab title="Episode">
          <!-- begin episode content tab -->

          <div class="field" ng-hide="!userHasRole('admin')">
            <div class="label">Master asset type</div>
            <div class="input">
              <select size="1" ng-model="masterAssetType">
                <option value="Video">Native Video</option>
                <option value="WebUrl">Youtube / Kaltura / Wistia</option>
              </select>
            </div>
          </div>
          <div class="field" ng-if="masterAssetType == 'Video' && userHasRole('admin')">
            <div class="label">Video</div>
            <div class="input" ng-include="'templates/producer/upload-masterasset.html'"></div>
          </div>

          <itt-url-field
            label="Video URL"
            ng-if="masterAssetType === 'WebUrl'"
            data="::masterAsset.mediaSrcArr[0]"
            context="episode"
            on-attach="attachMediaSrc($url)">
          </itt-url-field>

          <div class="field" ng-if="showmessage">
            <div class="input" ng-bind-html="showmessage"></div>
          </div>
          <itt-title-field data="episode" model-opts="{ debounce: 500 }" do-validate="true" itt-item-form="ittEpisodeForm"></itt-title-field>
          <itt-description-field data="episode" model-opts="{debounce: 50}"></itt-description-field>


          <div class="field" ng-if="userHasRole('admin')">
            <div class="label">Poster image
            </div>
            <div class="input" ng-include="'templates/producer/upload-poster.html'">
            </div>
          </div>

          <div class="field">
            <div class="label">Status</div>
            <div class="input">
              <select size="1" ng-model="episode.status">
                <option value="Published">Published</option>
                <option value="Unpublished">Unpublished</option>
              </select>
            </div>
          </div>

          <itt-language-flags></itt-language-flags>
          <itt-language-select
            ng-if="languageCount > 1"
            data="episode"
            lang-form="langForm">
          </itt-language-select>
          <div class="field" ng-if="episode.languages.length > 1">
            <div class="label">Current Language</div>
            <div class="input">
              <select size="1" ng-model="appState.lang" ng-change="forcePreview()"
                      ng-options="language.code as ('['+language.code.toUpperCase()+']') for language in episode.languages">
              </select>
            </div>
          </div>

          <div class="field" ng-if="userHasRole('admin') && episode.languages.length > 1">
            <div class="label">Translations</div>
            <div class="input" ng-if="doCheckForTranslations == null">
              {{translationMessage(episode.languages)}}
              <button ng-click="beginBackgroundTranslations(episode._id)">Begin translation</button>
            </div>
            <div ng-if="doCheckForTranslations === true">
              {{afterTranslationAttempt}}
            </div>
          </div>

          <itt-upload-transcripts ng-if="userHasRole('admin')" episode-id="{{episode._id}}"></itt-upload-transcripts>

          <!-- end episode content tab -->
        </div>
        <div class="ittTab" itt-tab title="Style">
          <!-- begin styles tab -->
          <itt-template-select data="episode"></itt-template-select>
          <!--<itt-typography-select></itt-typography-select>-->
          <!--<itt-color-select></itt-color-select>-->
          <itt-timestamp-select></itt-timestamp-select>
          <itt-highlight-select></itt-highlight-select>
          <itt-transition-select></itt-transition-select>
          <!-- end styles tab -->
        </div>
        <!-- end of tabset -->
      </div>
    </div>
    <div class="ittTabFoot">
      <a ng-click="cancelEdit()">Cancel</a> &nbsp; &nbsp;

      <button ng-click="saveEpisode()" ng-disabled="blockDoubleClicks || ittEpisodeForm.$invalid">Save</button>
    </div>
  </form>
</div>
