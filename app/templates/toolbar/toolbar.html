<span>
	<div class="toolbar" x-ng-show="show.playerPanel">
			<a x-ng-click="toggleSceneTemplate();" class="button button-directed" href="javascript:void 1;">
				<span x-ng-if="!currentSceneTemplateIs('explore')">Explore</span>
				<span x-ng-if="currentSceneTemplateIs('explore')">Watch</span>
			</a>

		<a x-ng-if="isFramed" class="button button-mainframeescape" href="/#/episode/{{episodeID}}/{{authKey}}" target="frameEscape" onclick="window.open('','frameEscape').focus();">
			<span>New window</span>
		</a>

		<a class="button button-search" href="javascript: void 1;" x-ng-click="showSearchPanel()">
			<span>Search</span>
		</a>
		
	</div>
	<div class="threedee">
		<div class="modal-backdrop" x-ng-click="hidePanels()" x-ng-show="show.navigationPanel || show.searchPanel"></div>
		<div x-ng-show="show.navigationPanel" class="sidePanel navigationPanel">
			<div x-ng-controller="NavigationPanelController">
				<h2>{{episode.title}}</h2>
				<div class="scene" x-ng-if="scene.title" x-ng-repeat="scene in scenes" x-ng-class="{currentScene: scene.isActive}" x-ng-click="gotoScene(scene)">
					<span class="displayTime">{{scene.displayTime}}</span>
					<p>
						<a href="javascript:void 1;">{{scene.title}}</a>
						<br>{{scene.description}}
					</p>
				</div>
			</div>
		</div>
		<div x-ng-show="show.searchPanel" class="sidePanel searchPanel">
			<div x-ng-if="show.searchPanelInternals" x-ng-controller="SearchPanelController">
				<div class="filters">
					<dl>
						<dt>Search:</dt>
						<dd>
							<input id="searchtext" type="text" x-ng-model="searchText" />
						</dd>
						<!--
		TODO: bring this back when we implement categories (and use the episode's categories to build the list of options)
					<dt>Types:</dt>
					<dd>
						<label><input type="checkbox" id="searchalltypes" checked="checked"><span> All transmedia types</span></label>
						<div id="searchtypes" class="accordion">
							<label><input type="checkbox" name="searchcategory" id="searchtype-transcript" x-ng-model="searchTypes.annotation"><span> {{prettyTypeMap['annotation']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-links" x-ng-model="searchTypes.link"><span> {{prettyTypeMap['link']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-slides" x-ng-model="searchTypes.slide"><span> {{prettyTypeMap['slide']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-in_depth" x-ng-model="searchTypes.indepth"><span> {{prettyTypeMap['indepth']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-projects" x-ng-model="searchTypes.project"><span> {{prettyTypeMap['project']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-discussions" x-ng-model="searchTypes.discussion"><span> {{prettyTypeMap['discussion']}}</span></label>
						</div>
					</dd>
		-->
						<dt>Sort by:</dt>
						<dd>
							<select id="searchsort" size="1" x-ng-model="sortBy">
								<option value="startTime">Time</option>
								<option value="type">Type</option>
							</select>
						</dd>
					</dl>
				</div>
				<div class="scrollContainer">
					<div class="searchResults">
						<!-- TODO:
					- Wire up all types checkbox
					- Check ordering in items by type
					- Hide type header when no child items are visible
				-->
						<!-- sorted by start time -->
						<div x-ng-if="sortBy == 'startTime'">
							<div x-ng-repeat="scene in scenes">
								<h3>{{scene.title}}</h3>
								<div class="item" x-ng-repeat="item in scene.items | orderBy:'startTime' | filter:{'searchableText': searchText} | type:searchTypes">
									<span class="displayTime"><a href="javascript:void 1" x-ng-click="gotoItem(item)">{{item.displayTime}}</a>
									</span>
									<span class="type">({{prettyTypeMap[item.type]}})</span>
									<div class="description" ng-bind-html="item.trustedDisplayText | highlight: searchText"></div>
								</div>
							</div>
						</div>

						<!-- sorted by type -->
						<div x-ng-if="sortBy == 'type'">
							<div class="sortedbytype" x-ng-repeat="(type, items) in allItemsByType | orderBy:'type'" x-ng-if="searchTypes[type]">
								<h3>{{prettyTypeMap[type]}}</h3>
								<div class="item" x-ng-repeat="item in items | orderBy:'startTime' | type:searchTypes | filter:{'searchableText': searchText}">
									<span class="displayTime"><a href="javascript:void 1" x-ng-click="gotoItem(item)">{{item.displayTime}}</a>
									</span>
									<span class="type">({{prettyTypeMap[item.type]}})</span>
									<div class="description" ng-bind-html="item.trustedDisplayText | highlight: searchText"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- TODO ARIA markup on all clickables -->
	<div class="injectedvideocontrols vjs-story-skin">
		<div x-ng-click="showSceneMenu()" class="video-scenemenu vjs-control">
			<a href="javascript: void 1;">
				<span class="vjs-control-text">Scene list</span>
			</a>
		</div>

		<div x-ng-class="{isOpen: currentSceneTemplateIs('video')}" x-ng-click="toggleClosedCaptionMode()" class="video-captions vjs-control">
			<a href="javascript: void 1;">
				<span class="vjs-control-text">Closed Captions</span>
			</a>
		</div>
	
		<div x-ng-if="curScene.$prevScene" class="video-prevscene vjs-control">
			<a x-ng-click="gotoTime(curScene.$prevScene.startTime)">
				<span class="vjs-control-text">Previous scene</span>
			</a>
		</div>
		<div x-ng-if="curScene.$nextScene" class="video-nextscene vjs-control">
			<a x-ng-click="gotoTime(curScene.$nextScene.startTime)">
				<span class="vjs-control-text">Next scene</span>
			</a>
		</div>
	</div>


	<div x-ng-show="show.introPanel" class="sceneintro">
		<h1>
			{{episode.title}}
		</h1>
		<p>
			{{episode.description}}
		</p>
		<div class="pane videoContainer" x-itt-magnet>
			<div class="fillPane video">
				<img class="aspectratiopreserver" src="/images/aspectratiopreserver-16x9.gif" /> 
			</div>
		</div>


	</div>


	<div id="footertrigger" x-ng-mouseenter="showVideoControls()"></div>

</span>
