<div>
	<div class="toolbar">
		<a class="button button-showscenenav" href="javascript: void 1;" ng-click="showNavigationPanel()">
			<span>Scenes</span>
		</a>
		<a class="button button-search" href="javascript: void 1;" ng-click="showSearchPanel()">
			<span>Search</span>
		</a>
		<div id="frameselections">
			<!-- TODO: trigger view changes on click -->
			<a ng-click="setSceneTemplate('video');"   class="button button-video"    ng-class="{cur: currentSceneTemplateIs('video')}"   href="javascript:void 1;"><span>Video view</span></a>
			<a ng-click="setSceneTemplate();"          class="button button-directed" ng-class="{cur: currentSceneTemplateIs()}"          href="javascript:void 1;"><span>Directed view</span></a>
			<a ng-click="setSceneTemplate('explore');" class="button button-explore"  ng-class="{cur: currentSceneTemplateIs('explore')}" href="javascript:void 1;"><span>Explore view</span></a>
		</div>
	</div>
	<div class="modal-backdrop" ng-click="hidePanels()" ng-show="show.navigationPanel || show.searchPanel"></div>
	<div ng-if="show.navigationPanel"><div class="sidePanel navigationPanel" ng-controller="NavigationPanelController">
		<div class="sidePanelInner colorInvert {{episode.styles}}">
				<h2>{{episode.title}}</h2>
				<div class="scene" ng-repeat="scene in scenes" ng-class="{currentScene: scene.isActive}">
					<span class="displayTime">{{scene.displayTime}}</span> <a href="javascript:void 1" ng-click="gotoScene(scene)">{{scene.title}}</a><br>
					<p>{{scene.description}}</p>
				</div>
			</div>
	</div></div>
	<div ng-if="show.searchPanel"><div class="sidePanel searchPanel" ng-controller="SearchPanelController">
		<div class="sidePanelInner {{episode.styles}}">
			<div class="filters">
				<dl>
					<dt>Search:</dt>
					<dd>
						<input id="searchtext" type="text" ng-model="searchText" />
					</dd>
		<!--
		TODO: bring this back when we implement categories (and use the episode's categories to build the list of options)
					<dt>Types:</dt>
					<dd>
						<label><input type="checkbox" id="searchalltypes" checked="checked"><span> All transmedia types</span></label>
						<div id="searchtypes" class="accordion">
							<label><input type="checkbox" name="searchcategory" id="searchtype-transcript" ng-model="searchTypes.annotation"><span> {{prettyTypeMap['annotation']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-links" ng-model="searchTypes.link"><span> {{prettyTypeMap['link']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-slides" ng-model="searchTypes.slide"><span> {{prettyTypeMap['slide']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-in_depth" ng-model="searchTypes.indepth"><span> {{prettyTypeMap['indepth']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-projects" ng-model="searchTypes.project"><span> {{prettyTypeMap['project']}}</span></label>
							<label><input type="checkbox" name="searchcategory" id="searchtype-discussions" ng-model="searchTypes.discussion"><span> {{prettyTypeMap['discussion']}}</span></label>
						</div>
					</dd>
		-->
					<dt>Sort by:</dt>
					<dd>
						<select id="searchsort" size="1" ng-model="sortBy">
							<option value="startTime">Time</option>
							<option value="type">Type</option>
						</select>
					</dd>
				</dl>
			</div>
			<div class="scrollContainer">
				<div class="searchResults">
				<!-- TODO:
					- Wire up all types checkbox
					- Check ordering in items by type
					- Hide type header when no child items are visible
				-->
					<!-- sorted by start time -->
					<div ng-if="sortBy == 'startTime'">
						<div ng-repeat="scene in scenes">
							<h3>{{scene.title}}</h3>
							<div class="item" ng-repeat="item in scene.items | orderBy:'startTime' | filter:searchText | type:searchTypes">
								<span class="displayTime"><a href="javascript:void 1" ng-click="gotoItem(item)">{{item.displayTime}}</a></span> <span class="type">({{prettyTypeMap[item.type]}})</span>
								<div class="description">{{item.description || item.annotation}}</div>
							</div>
						</div>
					</div>
			
					<!-- sorted by type -->
					<div ng-if="sortBy == 'type'">
						<div class="sortedbytype" ng-repeat="(type, items) in allItemsByType | orderBy:'type'" ng-if="searchTypes[type]">
							<h3>{{prettyTypeMap[type]}}</h3>
							<div class="item" ng-repeat="item in items | orderBy:'startTime' | type:searchTypes | filter:searchText">
								<span class="displayTime"><a href="javascript:void 1" ng-click="gotoItem(item)">{{item.displayTime}}</a></span> <span class="type">({{prettyTypeMap[item.type]}})</span>
								<div class="description">{{item.description || item.annotation}}</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div></div>
</div>
